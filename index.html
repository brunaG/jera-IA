<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jornada do Pensamento Computacional</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background: white;
            min-height: 100vh;
        }

        .tela {
            display: none;
        }

        .tela.ativa {
            display: block;
        }

        .btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #2563EB;
            color: white;
        }

        .btn-primary:hover {
            background: #1D4ED8;
            transform: scale(1.05);
        }

        .btn-secondary {
            background: #6B7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4B5563;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .card {
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.15);
        }

        .descricao {
            color: #6B7280;
            text-align: center;
            margin-bottom: 1rem;
        }

        .contexto {
            background: #F3F4F6;
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }

        .card-icone {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        h1, h2 {
            color: #1F2937;
            margin-bottom: 1rem;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
        }

        h2 {
            font-size: 2rem;
        }

        .subtitulo {
            text-align: center;
            color: #6B7280;
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        /* Header melhorado com progresso */
        .header-exercicio {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .info-progresso {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .problema-atual, .pilar-atual {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .problema-atual .nome {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .pilar-atual .contador {
            background: rgba(255,255,255,0.2);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .barra-progresso-container {
            margin-top: 1rem;
        }

        .barra-progresso {
            background: rgba(255,255,255,0.2);
            height: 12px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .barra-fill {
            background: #10B981;
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .stats-inline {
            display: flex;
            justify-content: space-between;
            font-size: 0.95rem;
        }

        .exercicio-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .exercicio-card {
            background: white;
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .exercicio-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .tipo-badge {
            background: #DBEAFE;
            color: #1E40AF;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .pontos-badge {
            background: #D1FAE5;
            color: #065F46;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .pergunta {
            font-size: 1.5rem;
            color: #1F2937;
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .options {
            margin: 1rem 0;
        }

        .opcoes-container {
            margin-bottom: 2rem;
        }

        .opcao {
            background: #F9FAFB;
            border: 2px solid #E5E7EB;
            border-radius: 10px;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .opcao:hover {
            background: #F3F4F6;
            border-color: #2563EB;
            transform: translateX(5px);
        }

        .opcao input[type="radio"],
        .opcao input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .opcao label {
            cursor: pointer;
            flex: 1;
            font-size: 1.1rem;
            color: #374151;
        }

        .feedback-area {
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            animation: slideDown 0.3s ease;
            display: none;
        }

        .feedback-area.show {
            display: block;
        }

        .feedback-area.correto {
            background: #D1FAE5;
            border-left: 4px solid #10B981;
        }

        .feedback-area.incorreto {
            background: #FEE2E2;
            border-left: 4px solid #EF4444;
        }

        .feedback-area.aviso {
            background: #FEF3C7;
            border-left: 4px solid #F59E0B;
        }

        .feedback-area.info {
            background: #F0F9FF;
            border-left: 4px solid #3B82F6;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Layout dos bot√µes melhorado */
        .botoes-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }

        .botoes-acao {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .btn-responder {
            background: #2563EB;
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-responder:hover:not(:disabled) {
            background: #1D4ED8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .btn-responder:disabled {
            background: #9CA3AF;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-pular {
            background: #6B7280;
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-pular:hover:not(:disabled) {
            background: #4B5563;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(107, 114, 128, 0.3);
        }

        .btn-pular:disabled {
            background: #9CA3AF;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-proximo {
            background: #10B981;
            color: white;
            padding: 1.25rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: none; /* Oculto inicialmente */
        }

        .btn-proximo.visivel {
            display: block;
        }

        .btn-proximo:hover {
            background: #059669;
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.3);
        }

        .status-bar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .conquista {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            border: 2px solid #e17055;
            color: #2d3436;
            padding: 1rem;
            border-radius: 12px;
            margin: 1rem 0;
            text-align: center;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .progresso-barra {
            width: 100%;
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progresso-fill {
            height: 100%;
            background: linear-gradient(90deg, #10B981, #059669);
            transition: width 0.3s ease;
        }

        /* Se√ß√µes educativas */
        .secao-explicativa,
        .secao-pilares,
        .secao-como-funciona {
            padding: 3rem 0;
            background: white;
        }

        .secao-pilares {
            background: #F9FAFB;
        }

        .container-educativo {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* T√≠tulos das se√ß√µes */
        .secao-explicativa h2,
        .secao-pilares h2,
        .secao-como-funciona h2 {
            text-align: center;
            font-size: 2rem;
            color: #1F2937;
            margin-bottom: 2rem;
        }

        /* Conte√∫do explicativo */
        .conteudo-explicativo p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #374151;
            margin-bottom: 1.5rem;
        }

        .conteudo-explicativo p.destaque {
            font-size: 1.3rem;
            line-height: 1.7;
            color: #1F2937;
            background: #EEF2FF;
            padding: 1.5rem;
            border-left: 4px solid #4F46E5;
            border-radius: 8px;
        }

        /* Grid de benef√≠cios */
        .beneficios-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .beneficio-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid #E5E7EB;
            text-align: center;
            transition: all 0.3s;
        }

        .beneficio-card:hover {
            border-color: #4F46E5;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(79, 70, 229, 0.1);
        }

        .beneficio-card .icone {
            font-size: 3rem;
            display: block;
            margin-bottom: 1rem;
        }

        .beneficio-card h4 {
            color: #1F2937;
            margin-bottom: 0.5rem;
        }

        .beneficio-card p {
            color: #6B7280;
            font-size: 0.95rem;
        }

        /* Grid de pilares */
        .intro-pilares {
            text-align: center;
            font-size: 1.2rem;
            color: #374151;
            margin-bottom: 3rem;
        }

        .pilares-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .pilar-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .pilar-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }

        .pilar-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .pilar-icone {
            font-size: 2.5rem;
        }

        .pilar-header h3 {
            font-size: 1.5rem;
            color: #1F2937;
            margin: 0;
        }

        .pilar-definicao {
            font-size: 1.1rem;
            color: #374151;
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .pilar-exemplo {
            background: #F3F4F6;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .pilar-exemplo strong {
            color: #4F46E5;
            display: block;
            margin-bottom: 0.5rem;
        }

        .pilar-exemplo p {
            color: #4B5563;
            font-size: 0.95rem;
            line-height: 1.6;
            margin: 0;
        }

        .pilar-beneficio {
            color: #059669;
            font-size: 0.95rem;
            padding: 0.75rem;
            background: #D1FAE5;
            border-radius: 6px;
        }

        .conclusao-pilares {
            background: #EEF2FF;
            border-left: 4px solid #4F46E5;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
        }

        .conclusao-pilares p {
            margin: 0;
            font-size: 1.1rem;
            color: #1F2937;
        }

        /* Layout dos passos */
        .passos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .passo-card {
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s;
        }

        .passo-card:hover {
            border-color: #4F46E5;
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(79, 70, 229, 0.1);
        }

        .passo-numero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            margin: 0 auto 1rem;
        }

        .passo-conteudo h4 {
            color: #1F2937;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .passo-conteudo p {
            color: #6B7280;
            font-size: 0.95rem;
            line-height: 1.5;
            margin: 0;
        }

        /* Stats da jornada */
        .stats-jornada {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .stat-box {
            text-align: center;
        }

        .stat-numero {
            display: block;
            font-size: 3rem;
            font-weight: bold;
            color: #4F46E5;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #6B7280;
            font-size: 0.9rem;
        }

        /* Bot√£o Come√ßar Jornada */
        .btn-comecar-jornada {
            display: block;
            max-width: 400px;
            margin: 3rem auto 0;
            padding: 1.5rem 3rem;
            font-size: 1.3rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
        }

        .btn-comecar-jornada:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 24px rgba(102, 126, 234, 0.4);
        }

        /* Modal mobile responsivo */
        @media (max-width: 768px) {
            .modal-container {
                width: 95%;
                margin: 1rem;
            }

            .modal-header {
                padding: 1rem;
            }

            .modal-body {
                padding: 1.5rem;
            }

            .modal-footer {
                padding: 1rem;
                flex-direction: column;
            }

            .modal-btn {
                width: 100%;
            }

            .registro-container {
                margin: 1rem;
                padding: 2rem;
            }

            .registro-header h1 {
                font-size: 2rem;
            }
        }

        /* Responsividade mobile */
        @media (max-width: 768px) {
            .botoes-acao {
                grid-template-columns: 1fr;
            }

            .info-progresso {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .stats-inline {
                flex-direction: column;
                gap: 0.25rem;
            }

            .beneficios-grid {
                grid-template-columns: 1fr;
            }

            .pilares-grid {
                grid-template-columns: 1fr;
            }

            .passos-grid {
                grid-template-columns: 1fr;
            }

            .stats-jornada {
                gap: 2rem;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            .btn {
                width: 100%;
                margin: 0.5rem 0;
            }

            .container-educativo {
                padding: 0 1rem;
            }

            .secao-explicativa,
            .secao-pilares,
            .secao-como-funciona {
                padding: 2rem 0;
            }

            .pilar-card {
                padding: 1.5rem;
            }

            .passo-card {
                padding: 1.5rem;
            }

            .btn-comecar-jornada {
                font-size: 1.1rem;
                padding: 1.2rem 2rem;
            }

            .form-input {
                padding: 0.8rem;
            }

            .btn-large {
                padding: 1rem 1.5rem;
                font-size: 1.1rem;
            }
        }

        /* SISTEMA DE MODAL ELEGANTE */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.ativo {
            display: flex;
        }

        .modal-container {
            background: white;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideDown 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header.sucesso {
            background: #D1FAE5;
            border-bottom-color: #10B981;
        }

        .modal-header.aviso {
            background: #FEF3C7;
            border-bottom-color: #F59E0B;
        }

        .modal-header.erro {
            background: #FEE2E2;
            border-bottom-color: #EF4444;
        }

        .modal-header.confirmacao {
            background: #EEF2FF;
            border-bottom-color: #4F46E5;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.5rem;
            color: #1F2937;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: #6B7280;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: #F3F4F6;
            color: #1F2937;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-body p {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #374151;
            margin: 0 0 1rem 0;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #E5E7EB;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-btn-primary {
            background: #2563EB;
            color: white;
        }

        .modal-btn-primary:hover {
            background: #1D4ED8;
        }

        .modal-btn-secondary {
            background: #6B7280;
            color: white;
        }

        .modal-btn-secondary:hover {
            background: #4B5563;
        }

        .modal-btn-success {
            background: #10B981;
            color: white;
        }

        .modal-btn-success:hover {
            background: #059669;
        }

        /* FORMUL√ÅRIO DE REGISTRO */
        .registro-container {
            max-width: 600px;
            margin: 4rem auto;
            background: white;
            padding: 3rem;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .registro-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .registro-header h1 {
            font-size: 2.5rem;
            color: #1F2937;
            margin-bottom: 0.5rem;
        }

        .registro-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .label-icone {
            font-size: 1.2rem;
        }

        .form-input {
            padding: 1rem;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #2563EB;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-info {
            background: #EEF2FF;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #4F46E5;
        }

        .form-info p {
            margin: 0;
            font-size: 0.9rem;
            color: #4B5563;
        }

        .btn-large {
            padding: 1.25rem 2rem;
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 1rem;
        }

        /* FORM SIMPLIFICADO */
        .form-group-principal {
            text-align: center;
            margin-bottom: 2rem;
        }

        .form-input-principal {
            padding: 1.2rem;
            font-size: 1.2rem;
            border: 3px solid #E5E7EB;
            border-radius: 12px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            transition: all 0.3s;
            margin-bottom: 0.5rem;
        }

        .form-input-principal:focus {
            outline: none;
            border-color: #2563EB;
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
            transform: scale(1.02);
        }

        .form-hint {
            font-size: 0.9rem;
            color: #6B7280;
            margin: 0;
        }

        /* CONTEXTO DO PROBLEMA */
        .contexto-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .problema-icone-grande {
            font-size: 4rem;
            display: block;
            margin-bottom: 1rem;
        }

        .problema-subtitulo {
            color: #6B7280;
            font-size: 1.1rem;
        }

        .contexto-card {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 3rem;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            border: 2px solid #E5E7EB;
            margin-bottom: 3rem;
        }

        .contexto-card h2 {
            color: #1F2937;
            margin-bottom: 2rem;
            text-align: center;
        }

        .contexto-situacao, .contexto-desafios, .contexto-objetivo, .contexto-metricas {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 12px;
        }

        .contexto-situacao {
            background: #F0F9FF;
            border-left: 4px solid #0EA5E9;
        }

        .contexto-desafios {
            background: #FEF2F2;
            border-left: 4px solid #EF4444;
        }

        .contexto-objetivo {
            background: #F0FDF4;
            border-left: 4px solid #22C55E;
        }

        .contexto-metricas {
            background: #FEF3C7;
            border-left: 4px solid #F59E0B;
        }

        .contexto-situacao h3, .contexto-desafios h3, .contexto-objetivo h3, .contexto-metricas h3 {
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .contexto-desafios ul {
            margin: 0;
            padding-left: 1.5rem;
        }

        .contexto-desafios li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        .pilares-preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .pilar-preview {
            text-align: center;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            border: 2px solid #E5E7EB;
        }

        .pilar-preview span {
            font-size: 2rem;
            display: block;
            margin-bottom: 0.5rem;
        }

        .pilar-preview p {
            margin: 0;
            font-size: 0.9rem;
            color: #6B7280;
        }

        /* TELA DE RESULTADO AVALIATIVO */
        .resultado-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .resultado-header h1 {
            font-size: 2.5rem;
            color: #1F2937;
            margin-bottom: 0.5rem;
        }

        .resumo-visual {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .card-resumo {
            text-align: center;
            background: white;
            padding: 2rem;
            border-radius: 12px;
            border: 2px solid #E5E7EB;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .card-resumo h3 {
            color: #6B7280;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .pontuacao-final, .acuracia, .tempo {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2563EB;
            margin-bottom: 0.5rem;
        }

        .analise-status {
            margin-bottom: 3rem;
        }

        .analise-status h2 {
            text-align: center;
            margin-bottom: 2rem;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.5rem;
        }

        .status-card {
            text-align: center;
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid;
            background: white;
        }

        .status-card.acertou-primeira {
            border-color: #10B981;
            background: #D1FAE5;
        }

        .status-card.acertou-segunda {
            border-color: #3B82F6;
            background: #DBEAFE;
        }

        .status-card.errou {
            border-color: #EF4444;
            background: #FEE2E2;
        }

        .status-card.pulou {
            border-color: #F59E0B;
            background: #FEF3C7;
        }

        .status-icone {
            font-size: 2rem;
            display: block;
            margin-bottom: 0.5rem;
        }

        .status-numero {
            font-size: 2rem;
            font-weight: bold;
            display: block;
            margin-bottom: 0.5rem;
        }

        .status-label {
            font-size: 0.9rem;
            color: #374151;
        }

        .desempenho-pilares {
            margin-bottom: 3rem;
        }

        .desempenho-pilares h2 {
            text-align: center;
            margin-bottom: 2rem;
        }

        .pilares-resultado {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .pilar-barra {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid #E5E7EB;
        }

        .pilar-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .pilar-pontos {
            color: #2563EB;
        }

        .barra-progresso {
            background: #F3F4F6;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .barra-fill {
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        .pilar-detalhes {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #6B7280;
        }

        .percentual {
            font-weight: bold;
            color: #2563EB;
        }

        .tabela-exercicios {
            margin-bottom: 3rem;
        }

        .tabela-exercicios h2 {
            text-align: center;
            margin-bottom: 2rem;
        }

        .tabela-container {
            overflow-x: auto;
            background: white;
            border-radius: 12px;
            border: 2px solid #E5E7EB;
        }

        .tabela-resultado {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        .tabela-resultado th {
            background: #F9FAFB;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #E5E7EB;
        }

        .tabela-resultado td {
            padding: 1rem;
            border-bottom: 1px solid #F3F4F6;
        }

        .tabela-resultado tr.acertou-primeira {
            background: #D1FAE5;
        }

        .tabela-resultado tr.acertou-segunda {
            background: #DBEAFE;
        }

        .tabela-resultado tr.erro {
            background: #FEE2E2;
        }

        .tabela-resultado tr.pulou {
            background: #FEF3C7;
        }

        .analise-qualitativa {
            margin-bottom: 3rem;
        }

        .analise-qualitativa h2 {
            text-align: center;
            margin-bottom: 2rem;
        }

        .pontos-fortes, .pontos-desenvolver {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            border: 2px solid #E5E7EB;
            margin-bottom: 1.5rem;
        }

        .pontos-fortes {
            border-left: 4px solid #10B981;
        }

        .pontos-desenvolver {
            border-left: 4px solid #F59E0B;
        }

        .pontos-fortes h3 {
            color: #065F46;
            margin-bottom: 1rem;
        }

        .pontos-desenvolver h3 {
            color: #92400E;
            margin-bottom: 1rem;
        }

        .acoes-relatorio {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .btn-success {
            background: #10B981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        /* Responsividade para relat√≥rio */
        @media (max-width: 768px) {
            .resumo-visual {
                grid-template-columns: 1fr;
            }

            .status-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .pilar-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .pilar-detalhes {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }

            .acoes-relatorio {
                flex-direction: column;
            }
        }

        /* Mensagem de transi√ß√£o */
        .mensagem-transicao {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            text-align: center;
            z-index: 1000;
            border: 3px solid #10B981;
        }

        .mensagem-transicao h2 {
            color: #10B981;
            margin-bottom: 1rem;
        }

        .mensagem-transicao .proximo {
            color: #2563EB;
            font-weight: 600;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>

    <!-- MODAL SYSTEM -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header" id="modal-header">
                <h3 id="modal-titulo"></h3>
                <button class="modal-close" onclick="fecharModal()">√ó</button>
            </div>

            <div class="modal-body" id="modal-body">
                <p id="modal-mensagem"></p>
                <div id="modal-conteudo-extra"></div>
            </div>

            <div class="modal-footer" id="modal-footer">
                <!-- Bot√µes aparecem aqui dinamicamente -->
            </div>
        </div>
    </div>

    <!-- TELA 0: REGISTRO DO ALUNO -->
    <div id="tela-registro" class="tela ativa">
        <div class="container">
            <div class="registro-container">
                <div class="registro-header">
                    <h1>üéì Bem-vindo √† Jornada!</h1>
                    <p class="subtitulo">Para come√ßar, digite seu nome</p>
                </div>

                <form class="registro-form" onsubmit="registrarAluno(event)">
                    <div class="form-group-principal">
                        <label for="nome-aluno">
                            <span class="label-icone">üë§</span>
                            Seu Nome Completo
                        </label>
                        <input type="text"
                               id="nome-aluno"
                               name="nome"
                               placeholder="Digite seu nome completo"
                               required
                               minlength="3"
                               class="form-input-principal"
                               autofocus>
                        <p class="form-hint">
                            Seu nome ser√° usado no certificado e relat√≥rio final
                        </p>
                    </div>

                    <button type="submit" class="btn btn-primary btn-large">
                        Come√ßar Minha Jornada üöÄ
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- TELA 1: INICIAL EDUCATIVA -->
    <div id="tela-inicial" class="tela">
        <div class="container">
            <h1>üéì Jornada do Pensamento Computacional</h1>
            <p class="subtitulo">Aplicado √† Gest√£o Empresarial</p>

            <!-- SE√á√ÉO 1: O QUE √â PENSAMENTO COMPUTACIONAL -->
            <section class="secao-explicativa">
                <div class="container-educativo">
                    <h2>üí° O Que √© Pensamento Computacional?</h2>

                    <div class="conteudo-explicativo">
                        <p class="destaque">
                            O Pensamento Computacional √© uma <strong>habilidade fundamental</strong>
                            para resolver problemas de forma <strong>l√≥gica, estruturada e eficiente</strong>
                            ‚Äî assim como um computador faria.
                        </p>

                        <p>
                            Desenvolvido pela pesquisadora <strong>Jeannette Wing</strong> em 2006,
                            o pensamento computacional <strong>n√£o se trata apenas de programar</strong>
                            ou usar computadores. √â uma <strong>forma de pensar</strong> que pode ser
                            aplicada em <strong>diversas √°reas da vida</strong>: gest√£o de projetos,
                            resolu√ß√£o de problemas empresariais, organiza√ß√£o de tarefas e muito mais.
                        </p>

                        <div class="beneficios-grid">
                            <div class="beneficio-card">
                                <span class="icone">üéØ</span>
                                <h4>Resolu√ß√£o Eficiente</h4>
                                <p>Abordar problemas complexos de forma sistem√°tica</p>
                            </div>

                            <div class="beneficio-card">
                                <span class="icone">üß†</span>
                                <h4>Pensamento Cr√≠tico</h4>
                                <p>Analisar situa√ß√µes e tomar decis√µes informadas</p>
                            </div>

                            <div class="beneficio-card">
                                <span class="icone">üí°</span>
                                <h4>Criatividade</h4>
                                <p>Desenvolver solu√ß√µes inovadoras</p>
                            </div>

                            <div class="beneficio-card">
                                <span class="icone">ü§ù</span>
                                <h4>Colabora√ß√£o</h4>
                                <p>Trabalhar em equipe de forma estruturada</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SE√á√ÉO 2: OS 4 PILARES DO PENSAMENTO COMPUTACIONAL -->
            <section class="secao-pilares">
                <div class="container-educativo">
                    <h2>üèõÔ∏è Os 4 Pilares do Pensamento Computacional</h2>

                    <p class="intro-pilares">
                        O pensamento computacional se baseia em <strong>4 pilares fundamentais</strong>
                        que orientam o processo de resolu√ß√£o de problemas:
                    </p>

                    <div class="pilares-grid">
                        <!-- PILAR 1: DECOMPOSI√á√ÉO -->
                        <div class="pilar-card" style="border-left: 4px solid #3B82F6;">
                            <div class="pilar-header">
                                <span class="pilar-icone">üß©</span>
                                <h3>1. Decomposi√ß√£o</h3>
                            </div>

                            <div class="pilar-conteudo">
                                <p class="pilar-definicao">
                                    <strong>Dividir problemas complexos</strong> em partes menores
                                    e mais gerenci√°veis.
                                </p>

                                <div class="pilar-exemplo">
                                    <strong>üíº Exemplo em Gest√£o:</strong>
                                    <p>
                                        Ao enfrentar "entregas atrasadas", decompomos em:
                                        planejamento de rotas + capacidade de ve√≠culos +
                                        fatores externos (tr√¢nsito/clima). Cada parte pode
                                        ser analisada e resolvida individualmente.
                                    </p>
                                </div>

                                <div class="pilar-beneficio">
                                    <strong>‚úì Benef√≠cio:</strong> Torna problemas intimidantes
                                    em tarefas gerenci√°veis.
                                </div>
                            </div>
                        </div>

                        <!-- PILAR 2: RECONHECIMENTO DE PADR√ïES -->
                        <div class="pilar-card" style="border-left: 4px solid #10B981;">
                            <div class="pilar-header">
                                <span class="pilar-icone">üîç</span>
                                <h3>2. Reconhecimento de Padr√µes</h3>
                            </div>

                            <div class="pilar-conteudo">
                                <p class="pilar-definicao">
                                    <strong>Identificar semelhan√ßas, tend√™ncias e regularidades</strong>
                                    nos dados para facilitar a resolu√ß√£o.
                                </p>

                                <div class="pilar-exemplo">
                                    <strong>üíº Exemplo em Gest√£o:</strong>
                                    <p>
                                        Perceber que 70% dos atrasos ocorrem entre 17h-19h
                                        indica um padr√£o de hor√°rio de pico (rush hour).
                                        Reconhecer esse padr√£o permite alocar mais recursos
                                        nesse per√≠odo.
                                    </p>
                                </div>

                                <div class="pilar-beneficio">
                                    <strong>‚úì Benef√≠cio:</strong> Permite antecipar problemas
                                    e planejar solu√ß√µes proativas.
                                </div>
                            </div>
                        </div>

                        <!-- PILAR 3: ABSTRA√á√ÉO -->
                        <div class="pilar-card" style="border-left: 4px solid #F59E0B;">
                            <div class="pilar-header">
                                <span class="pilar-icone">üéØ</span>
                                <h3>3. Abstra√ß√£o</h3>
                            </div>

                            <div class="pilar-conteudo">
                                <p class="pilar-definicao">
                                    <strong>Focar nos aspectos essenciais</strong> de um problema,
                                    ignorando detalhes irrelevantes.
                                </p>

                                <div class="pilar-exemplo">
                                    <strong>üíº Exemplo em Gest√£o:</strong>
                                    <p>
                                        Para calcular a rota ideal de entrega, o essencial
                                        √©: dist√¢ncia e tempo estimado. A cor do ve√≠culo ou
                                        a marca do pneu s√£o detalhes irrelevantes que podem
                                        ser ignorados.
                                    </p>
                                </div>

                                <div class="pilar-beneficio">
                                    <strong>‚úì Benef√≠cio:</strong> Simplifica problemas complexos
                                    focando no que realmente importa.
                                </div>
                            </div>
                        </div>

                        <!-- PILAR 4: ALGORITMOS -->
                        <div class="pilar-card" style="border-left: 4px solid #8B5CF6;">
                            <div class="pilar-header">
                                <span class="pilar-icone">‚öôÔ∏è</span>
                                <h3>4. Algoritmos</h3>
                            </div>

                            <div class="pilar-conteudo">
                                <p class="pilar-definicao">
                                    <strong>Criar sequ√™ncias l√≥gicas de passos</strong> para
                                    resolver um problema de forma eficiente.
                                </p>

                                <div class="pilar-exemplo">
                                    <strong>üíº Exemplo em Gest√£o:</strong>
                                    <p>
                                        Para planejar entregas: 1) Listar endere√ßos ‚Üí
                                        2) Calcular dist√¢ncias ‚Üí 3) Ordenar por proximidade ‚Üí
                                        4) Validar janelas de hor√°rio. Uma sequ√™ncia clara
                                        e repet√≠vel.
                                    </p>
                                </div>

                                <div class="pilar-beneficio">
                                    <strong>‚úì Benef√≠cio:</strong> Cria processos padronizados
                                    e replic√°veis.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="conclusao-pilares">
                        <p>
                            üí° <strong>Importante:</strong> Esses 4 pilares trabalham <strong>juntos</strong>
                            na resolu√ß√£o de problemas. Voc√™ vai pratic√°-los atrav√©s de exerc√≠cios
                            baseados em <strong>situa√ß√µes reais de gest√£o empresarial</strong>!
                        </p>
                    </div>
                </div>
            </section>

            <!-- SE√á√ÉO 3: COMO FUNCIONA (mantida, mas vem DEPOIS) -->
            <section class="secao-como-funciona">
                <div class="container-educativo">
                    <h2>üéØ Como Funciona a Jornada?</h2>

                    <div class="passos-grid">
                        <div class="passo-card">
                            <div class="passo-numero">1</div>
                            <div class="passo-conteudo">
                                <h4>Escolha um Problema</h4>
                                <p>Selecione uma situa√ß√£o real de gest√£o empresarial</p>
                            </div>
                        </div>

                        <div class="passo-card">
                            <div class="passo-numero">2</div>
                            <div class="passo-conteudo">
                                <h4>Resolva 12 Exerc√≠cios</h4>
                                <p>3 exerc√≠cios para cada um dos 4 pilares</p>
                            </div>
                        </div>

                        <div class="passo-card">
                            <div class="passo-numero">3</div>
                            <div class="passo-conteudo">
                                <h4>Receba sua Pontua√ß√£o</h4>
                                <p>Veja seu desempenho e certificado de conclus√£o</p>
                            </div>
                        </div>
                    </div>

                    <div class="stats-jornada">
                        <div class="stat-box">
                            <span class="stat-numero">12</span>
                            <span class="stat-label">Exerc√≠cios Pr√°ticos</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-numero">4</span>
                            <span class="stat-label">Pilares do PC</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-numero">120</span>
                            <span class="stat-label">Pontos M√°ximos</span>
                        </div>
                    </div>

                    <button class="btn btn-primary btn-comecar-jornada" onclick="irParaProblemas()">
                        Come√ßar Jornada üöÄ
                    </button>
                </div>
            </section>
        </div>
    </div>

    <!-- TELA 2.5: CONTEXTO DO PROBLEMA -->
    <div id="tela-contexto-problema" class="tela">
        <div class="container">
            <div class="contexto-header">
                <span class="problema-icone-grande" id="contexto-problema-icone">üöö</span>
                <h1 id="contexto-problema-titulo">Log√≠stica E-commerce</h1>
                <p class="problema-subtitulo">Problema de Gest√£o Empresarial</p>
            </div>

            <div class="contexto-card">
                <h2>üìã Contexto do Problema</h2>

                <div class="contexto-situacao">
                    <h3>Situa√ß√£o Atual:</h3>
                    <p id="contexto-situacao">
                        Sua empresa de e-commerce cresceu 200% no √∫ltimo ano.
                        Com esse crescimento acelerado, surgiram desafios
                        significativos na opera√ß√£o log√≠stica.
                    </p>
                </div>

                <div class="contexto-desafios">
                    <h3>üî¥ Desafios Identificados:</h3>
                    <ul id="contexto-desafios-lista">
                        <li>Reclama√ß√µes de atraso aumentaram 40%</li>
                        <li>Custos de entrega subiram 35%</li>
                        <li>Taxa de satisfa√ß√£o dos clientes caiu de 92% para 78%</li>
                        <li>Equipe de log√≠stica sobrecarregada</li>
                    </ul>
                </div>

                <div class="contexto-objetivo">
                    <h3>üéØ Seu Objetivo:</h3>
                    <p id="contexto-objetivo">
                        Aplicar os 4 pilares do Pensamento Computacional para
                        analisar o problema, identificar padr√µes, abstrair o
                        essencial e criar algoritmos de solu√ß√£o. Voc√™ resolver√°
                        12 exerc√≠cios pr√°ticos baseados neste cen√°rio real.
                    </p>
                </div>

                <div class="contexto-metricas">
                    <h3>üìä O Que Voc√™ Vai Aprender:</h3>
                    <div class="pilares-preview">
                        <div class="pilar-preview">
                            <span>üß©</span>
                            <p>Decompor o problema log√≠stico</p>
                        </div>
                        <div class="pilar-preview">
                            <span>üîç</span>
                            <p>Reconhecer padr√µes de atraso</p>
                        </div>
                        <div class="pilar-preview">
                            <span>üéØ</span>
                            <p>Abstrair fatores essenciais</p>
                        </div>
                        <div class="pilar-preview">
                            <span>‚öôÔ∏è</span>
                            <p>Criar algoritmos de otimiza√ß√£o</p>
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary btn-large" onclick="iniciarPilares()">
                Iniciar Exerc√≠cios ‚Üí
            </button>
        </div>
    </div>

    <!-- TELA 2: PROBLEMAS OTIMIZADA -->
    <div id="tela-problemas" class="tela">
        <div class="container">
            <h2>Escolha Seu Problema de Gest√£o</h2>
            <p class="subtitulo">Voc√™ resolver√° os 12 exerc√≠cios deste problema</p>
            <div class="alert-info" style="background: #FEF3C7; border: 2px solid #F59E0B; border-radius: 8px; padding: 1rem; margin: 1rem 0; text-align: center; color: #92400E;">
                ‚ÑπÔ∏è <strong>Aten√ß√£o:</strong> Ap√≥s escolher, voc√™ n√£o poder√° trocar de problema
            </div>

            <div class="grid">
                <!-- Card Log√≠stica -->
                <div class="card">
                    <div class="card-icone">üöö</div>
                    <h3>Log√≠stica E-commerce</h3>
                    <p class="descricao">Planejar rotas eficientes de entrega</p>
                    <p class="contexto">E-commerce cresceu 200%, atrasos aumentaram 40%</p>
                    <div style="font-size: 0.9rem; color: #6B7280; margin: 0.5rem 0;">12 exerc√≠cios ‚Ä¢ M√°x 120 pts</div>
                    <button type="button" class="btn btn-primary btn-selecionar"
                            onclick="selecionarProblema('logistica')"
                            style="width: 100%; margin-top: 1rem;">
                        Selecionar Problema
                    </button>
                </div>

                <!-- Card Performance -->
                <div class="card">
                    <div class="card-icone">üìä</div>
                    <h3>Gest√£o de Performance</h3>
                    <p class="descricao">Descobrir causas da baixa performance</p>
                    <p class="contexto">Equipe 30% abaixo da meta h√° 3 meses</p>
                    <div style="font-size: 0.9rem; color: #6B7280; margin: 0.5rem 0;">12 exerc√≠cios ‚Ä¢ M√°x 120 pts</div>
                    <button type="button" class="btn btn-primary btn-selecionar"
                            onclick="selecionarProblema('performance')"
                            style="width: 100%; margin-top: 1rem;">
                        Selecionar Problema
                    </button>
                </div>

                <!-- Card Estoque -->
                <div class="card">
                    <div class="card-icone">üì¶</div>
                    <h3>Gest√£o de Estoque</h3>
                    <p class="descricao">Prever demanda com precis√£o</p>
                    <p class="contexto">R$ 500k parados + 15% falta itens top</p>
                    <div style="font-size: 0.9rem; color: #6B7280; margin: 0.5rem 0;">12 exerc√≠cios ‚Ä¢ M√°x 120 pts</div>
                    <button type="button" class="btn btn-primary btn-selecionar"
                            onclick="selecionarProblema('estoque')"
                            style="width: 100%; margin-top: 1rem;">
                        Selecionar Problema
                    </button>
                </div>

                <!-- Card RH -->
                <div class="card">
                    <div class="card-icone">üë•</div>
                    <h3>Recrutamento RH</h3>
                    <p class="descricao">Identificar melhores candidatos</p>
                    <p class="contexto">300 curr√≠culos para 3 vagas</p>
                    <div style="font-size: 0.9rem; color: #6B7280; margin: 0.5rem 0;">12 exerc√≠cios ‚Ä¢ M√°x 120 pts</div>
                    <button type="button" class="btn btn-primary btn-selecionar"
                            onclick="selecionarProblema('rh')"
                            style="width: 100%; margin-top: 1rem;">
                        Selecionar Problema
                    </button>
                </div>

                <!-- Card Marketing -->
                <div class="card">
                    <div class="card-icone">üì±</div>
                    <h3>Marketing Digital</h3>
                    <p class="descricao">Comunica√ß√£o relevante e convers√£o</p>
                    <p class="contexto">50k clientes, 2% taxa abertura</p>
                    <div style="font-size: 0.9rem; color: #6B7280; margin: 0.5rem 0;">12 exerc√≠cios ‚Ä¢ M√°x 120 pts</div>
                    <button type="button" class="btn btn-primary btn-selecionar"
                            onclick="selecionarProblema('marketing')"
                            style="width: 100%; margin-top: 1rem;">
                        Selecionar Problema
                    </button>
                </div>
            </div>

            <div style="margin-top: 2rem; text-align: center;" id="navegacao-problemas">
                <button type="button" class="btn btn-secondary" onclick="mostrarTela('tela-inicial')">
                    ‚Üê Voltar
                </button>
            </div>
        </div>
    </div>

    <!-- TELA 3: PILARES OTIMIZADA -->
    <div id="tela-pilares" class="tela">
        <div class="container">
            <h2>4 Pilares do Pensamento Computacional</h2>
            <p class="subtitulo" id="problema-selecionado">Aplicado ao problema selecionado</p>
            <div class="progress-container" style="background: #f8f9fa; border-radius: 12px; padding: 1.5rem; margin: 1rem 0; border: 2px solid #E5E7EB;">
                <div class="progress-info" style="display: flex; justify-content: space-between; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem;">
                    <span><strong>Progresso:</strong> <span id="exercicio-atual-pilares">0</span>/12 exerc√≠cios</span>
                    <span><strong>Pontua√ß√£o:</strong> <span id="pontuacao-atual-pilares">0</span>/120 pts</span>
                </div>
                <div class="progress-pilares" style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 0.5rem;">
                    <span class="pilar" id="pilar-decomposicao" style="padding: 0.5rem; background: #e5e7eb; border-radius: 6px; font-size: 0.9rem;">üß© Decomposi√ß√£o: 0/3</span>
                    <span class="pilar" id="pilar-padroes" style="padding: 0.5rem; background: #e5e7eb; border-radius: 6px; font-size: 0.9rem;">üîç Padr√µes: 0/3</span>
                    <span class="pilar" id="pilar-abstracao" style="padding: 0.5rem; background: #e5e7eb; border-radius: 6px; font-size: 0.9rem;">üéØ Abstra√ß√£o: 0/3</span>
                    <span class="pilar" id="pilar-algoritmos" style="padding: 0.5rem; background: #e5e7eb; border-radius: 6px; font-size: 0.9rem;">‚öôÔ∏è Algoritmos: 0/3</span>
                </div>
            </div>

            <div class="grid">
                <div class="card" onclick="iniciarExercicios('decomposicao')">
                    <div class="card-icone">üß©</div>
                    <h3>Decomposi√ß√£o</h3>
                    <p>Quebrar problemas complexos em partes gerenci√°veis</p>
                    <button type="button" class="btn btn-primary"
                            onclick="iniciarExercicios('decomposicao')"
                            style="width: 100%; margin-top: 1rem;">
                        Iniciar
                    </button>
                </div>

                <div class="card" onclick="iniciarExercicios('padroes')">
                    <div class="card-icone">üîç</div>
                    <h3>Reconhecimento de Padr√µes</h3>
                    <p>Identificar tend√™ncias nos dados</p>
                    <button type="button" class="btn btn-primary"
                            onclick="iniciarExercicios('padroes')"
                            style="width: 100%; margin-top: 1rem;">
                        Iniciar
                    </button>
                </div>

                <div class="card" onclick="iniciarExercicios('abstracao')">
                    <div class="card-icone">üéØ</div>
                    <h3>Abstra√ß√£o</h3>
                    <p>Focar no essencial</p>
                    <button type="button" class="btn btn-primary"
                            onclick="iniciarExercicios('abstracao')"
                            style="width: 100%; margin-top: 1rem;">
                        Iniciar
                    </button>
                </div>

                <div class="card" onclick="iniciarExercicios('algoritmos')">
                    <div class="card-icone">‚öôÔ∏è</div>
                    <h3>Algoritmos</h3>
                    <p>Criar sequ√™ncias l√≥gicas</p>
                    <button type="button" class="btn btn-primary"
                            onclick="iniciarExercicios('algoritmos')"
                            style="width: 100%; margin-top: 1rem;">
                        Iniciar
                    </button>
                </div>
            </div>

            <div style="margin-top: 2rem; text-align: center;" id="navegacao-pilares">
                <!-- Navega√ß√£o bloqueada ap√≥s escolher problema -->
            </div>
        </div>
    </div>

    <!-- TELA 4: EXERC√çCIO - UI MELHORADA -->
    <div id="tela-exercicio" class="tela">
        <div class="container">
            <div class="exercicio-container">
                <!-- Header melhorado com progresso -->
                <div class="header-exercicio">
                    <div class="info-progresso">
                        <div class="problema-atual">
                            <span class="icone" id="problema-icone">üöö</span>
                            <span class="nome" id="problema-nome">Log√≠stica E-commerce</span>
                        </div>
                        <div class="pilar-atual">
                            <span class="icone" id="pilar-icone">üß©</span>
                            <span class="nome" id="pilar-nome">Decomposi√ß√£o</span>
                            <span class="contador" id="exercicio-contador">Exerc√≠cio 1/3</span>
                        </div>
                    </div>

                    <div class="barra-progresso-container">
                        <div class="barra-progresso">
                            <div class="barra-fill" id="barra-progresso-fill" style="width: 0%;"></div>
                        </div>
                        <div class="stats-inline">
                            <span class="stat">üìù <span id="exercicios-stats">1/12</span> exerc√≠cios</span>
                            <span class="stat">üèÜ <span id="pontos-stats">0/120</span> pontos</span>
                        </div>
                    </div>
                </div>

                <!-- Card do exerc√≠cio melhorado -->
                <div class="exercicio-card">
                    <div class="exercicio-header">
                        <span class="tipo-badge">M√∫ltipla escolha</span>
                        <span class="pontos-badge">+10 pontos</span>
                    </div>

                    <h2 class="pergunta" id="exercicio-pergunta">
                        Pergunta do exerc√≠cio ser√° carregada aqui
                    </h2>

                    <div class="opcoes-container" id="opcoes-container">
                        <!-- Op√ß√µes ser√£o inseridas aqui -->
                    </div>

                    <div class="feedback-area" id="feedback-area">
                        <!-- Feedback ap√≥s responder -->
                    </div>

                    <!-- Layout melhorado dos bot√µes -->
                    <div class="botoes-container">
                        <div class="botoes-acao">
                            <button class="btn-responder" onclick="validarResposta()">
                                Responder ‚úì
                            </button>
                            <button class="btn-pular" onclick="pularExercicio()">
                                Pular ‚Üí
                            </button>
                        </div>

                        <button class="btn-proximo" id="btn-proximo" onclick="proximoExercicio()">
                            Pr√≥ximo Exerc√≠cio ‚Üí
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TELA 5: RESULTADO AVALIATIVO COMPLETO -->
    <div id="tela-resultado" class="tela">
        <div class="container">
            <div style="max-width: 800px; margin: 0 auto; background: white; border-radius: 16px; padding: 2rem 3rem; box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
                <div class="resultado-header">
                    <h1>üèÜ Relat√≥rio de Desempenho</h1>
                    <p class="subtitulo" style="font-size: 1.3rem;">Parab√©ns, <strong id="nome-aluno-resultado">[Nome Aluno]</strong>! Veja sua an√°lise completa.</p>
                </div>

                <div class="resumo-visual">
                    <div class="card-resumo">
                        <h3>Pontua√ß√£o Final</h3>
                        <div class="pontuacao-final" id="resumo-pontuacao">0 / 120</div>
                    </div>
                    <div class="card-resumo">
                        <h3>Acertos (1¬™ Tentativa)</h3>
                        <div class="acuracia" id="resumo-acuracia">0%</div>
                    </div>
                    <div class="card-resumo">
                        <h3>Tempo Total</h3>
                        <div class="tempo" id="resumo-tempo">0m 0s</div>
                    </div>
                </div>

                <div class="analise-status">
                    <h2>An√°lise das Respostas</h2>
                    <div class="status-grid">
                        <div class="status-card acertou-primeira">
                            <span class="status-icone">üéØ</span>
                            <span class="status-numero" id="status-acertou-primeira">0</span>
                            <span class="status-label">Acertou na 1¬™</span>
                        </div>
                        <div class="status-card acertou-segunda">
                            <span class="status-icone">‚úÖ</span>
                            <span class="status-numero" id="status-acertou-segunda">0</span>
                            <span class="status-label">Acertou na 2¬™</span>
                        </div>
                        <div class="status-card errou">
                            <span class="status-icone">‚ùå</span>
                            <span class="status-numero" id="status-errou">0</span>
                            <span class="status-label">Errou (2 Tentativas)</span>
                        </div>
                        <div class="status-card pulou">
                            <span class="status-icone">‚è≠Ô∏è</span>
                            <span class="status-numero" id="status-pulou">0</span>
                            <span class="status-label">Pulou</span>
                        </div>
                    </div>
                </div>

                <div class="desempenho-pilares">
                    <h2>Desempenho por Pilar</h2>
                    <div class="pilares-resultado" id="pilares-resultado">
                        </div>
                </div>

                <div class="tabela-exercicios">
                    <h2>Detalhamento por Exerc√≠cio</h2>
                    <p style="text-align: center; color: #6B7280; margin-top: -1.5rem; margin-bottom: 1.5rem;">
                        Aqui voc√™ v√™ exatamente onde acertou e errou.
                    </p>
                    <div class="tabela-container">
                        <table class="tabela-resultado">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Pilar</th>
                                    <th>Status</th>
                                    <th>Tentativas</th>
                                    <th>Pontos</th>
                                    <th>Tempo</th>
                                </tr>
                            </thead>
                            <tbody id="tabela-exercicios-corpo">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div class="analise-qualitativa">
                    <h2>An√°lise Qualitativa</h2>
                    <div class="pontos-fortes">
                        <h3>‚úÖ Pontos Fortes</h3>
                        <ul id="pontos-fortes-lista">
                            </ul>
                    </div>
                    <div class="pontos-desenvolver">
                        <h3>üéØ Pontos a Desenvolver</h3>
                        <ul id="pontos-desenvolver-lista">
                            </ul>
                    </div>

                    <div id="gemini-plano-estudo" class="pontos-desenvolver" style="border-   left-color: #8B5CF6; margin-top: 2rem; display: none;">
                      <h3 style="color: #5B21B6;">ü§ñ Seu Plano de Estudo (Gerado por IA)</h3>
                      <div id="gemini-plano-conteudo" style="padding-top: 1rem;">
                    </div>
                  </div>

                </div>

                <div class="acoes-relatorio">
                    <button onclick="baixarRelatorioPDF()" class="btn btn-primary">
                        üì• Baixar Relat√≥rio (PDF)
                    </button>
                    <button onclick="baixarDadosCSV()" class="btn btn-success">
                        üìä Baixar Dados (CSV)
                    </button>
                    <button onclick="reiniciarJornada()" class="btn btn-secondary">
                        üîÑ Fazer Outro Problema
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
        console.log('üöÄ SCRIPT CARREGADO - VERS√ÉO CORRIGIDA');
        console.log('‚úÖ PROBLEMA DAS RESPOSTAS SEMPRE NA POSI√á√ÉO 0 CORRIGIDO!');
        console.log('üé≤ RESPOSTAS AGORA EM POSI√á√ïES ALEAT√ìRIAS!');
        console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');

        // VERS√ÉO OTIMIZADA - 1 PROBLEMA POR USU√ÅRIO
        var estadoJornada = {
            problemaEscolhido: null,
            pilarAtual: null,
            exercicioAtual: 1,
            pontuacaoTotal: 0,
            exerciciosCompletos: 0,
            pontuacaoPorPilar: {
                decomposicao: 0,
                padroes: 0,
                abstracao: 0,
                algoritmos: 0
            },
            pilaresCompletos: []
        };

        var CONFIGURACAO = {
            EXERCICIOS_POR_PROBLEMA: 12,
            PONTUACAO_MAXIMA: 120,
            EXERCICIOS_POR_PILAR: 3,
            PONTUACAO_MAXIMA_PILAR: 30,
            PONTOS_ACERTO_1A: 10,
            PONTOS_ACERTO_2A: 5,
            PONTOS_ERRO_1A: -2,
            PONTOS_ERRO_2A: -3,
            PONTOS_PULAR: 0,
            MAX_TENTATIVAS: 2
        };

        // ESTADO DO EXERC√çCIO ATUAL
        var exercicioAtualEstado = {
            tentativas: 0,
            acertou: false,
            pulou: false,
            respostaAluno: null,
            tempoInicio: null
        };

        // DADOS DO ALUNO
        var dadosAluno = {
            nome: '',
            dataInicio: null,
            dataFim: null
        };

        // SISTEMA DE M√âTRICAS COMPLETO
        var metricas = {
            exercicios: [],
            resumo: {
                totalExercicios: 12,
                acertouPrimeira: 0,
                acertouSegunda: 0,
                errou: 0,
                pulou: 0,
                pontuacaoFinal: 0,
                tempoTotal: 0
            },
            pilares: {
                decomposicao: {acertos1a: 0, acertos2a: 0, erros: 0, pulos: 0, pontos: 0},
                padroes: {acertos1a: 0, acertos2a: 0, erros: 0, pulos: 0, pontos: 0},
                abstracao: {acertos1a: 0, acertos2a: 0, erros: 0, pulos: 0, pontos: 0},
                algoritmos: {acertos1a: 0, acertos2a: 0, erros: 0, pulos: 0, pontos: 0}
            },
            inicioExercicio: null,
            tempoTotalInicio: null
        };

        // SISTEMA DE MODAL ELEGANTE
        function mostrarModal(opcoes) {
            var overlay = document.getElementById('modal-overlay');
            var header = document.getElementById('modal-header');
            var titulo = document.getElementById('modal-titulo');
            var mensagem = document.getElementById('modal-mensagem');
            var footer = document.getElementById('modal-footer');
            var conteudoExtra = document.getElementById('modal-conteudo-extra');

            // Limpar estado anterior
            header.className = 'modal-header';
            conteudoExtra.innerHTML = '';
            footer.innerHTML = '';

            // Configurar t√≠tulo
            titulo.textContent = opcoes.titulo || 'Aten√ß√£o';

            // Configurar mensagem
            mensagem.textContent = opcoes.mensagem || '';

            // Configurar tipo (sucesso, aviso, erro, confirmacao)
            if (opcoes.tipo) {
                header.classList.add(opcoes.tipo);
            }

            // Conte√∫do extra (opcional)
            if (opcoes.conteudoHTML) {
                conteudoExtra.innerHTML = opcoes.conteudoHTML;
            }

            // Bot√µes
            if (opcoes.tipo === 'confirmacao') {
                // Modal de confirma√ß√£o: Cancelar + Confirmar
                footer.innerHTML =
                    '<button class="modal-btn modal-btn-secondary" onclick="fecharModal()">Cancelar</button>' +
                    '<button class="modal-btn modal-btn-primary" onclick="confirmarModal()">Confirmar</button>';

                window.acaoConfirmar = opcoes.onConfirmar || function() {};
            } else {
                // Modal informativo: apenas OK
                footer.innerHTML =
                    '<button class="modal-btn modal-btn-success" onclick="fecharModal()">OK</button>';
            }

            // Mostrar modal
            overlay.classList.add('ativo');
        }

        function fecharModal() {
            var overlay = document.getElementById('modal-overlay');
            overlay.classList.remove('ativo');
        }

        function confirmarModal() {
            if (window.acaoConfirmar) {
                window.acaoConfirmar();
            }
            fecharModal();
        }

        // FORMUL√ÅRIO DE REGISTRO DO ALUNO
        function registrarAluno(event) {
            event.preventDefault();

            console.log('Registrando aluno...');

            // Capturar dados do formul√°rio
            dadosAluno.nome = document.getElementById('nome-aluno').value.trim();
            dadosAluno.dataInicio = new Date().toISOString();

            // Inicializar m√©tricas
            metricas.tempoTotalInicio = new Date();

            // Validar nome
            if (dadosAluno.nome.length < 3) {
                mostrarModal({
                    titulo: '‚ö†Ô∏è Aten√ß√£o',
                    mensagem: 'Por favor, digite seu nome completo.',
                    tipo: 'aviso'
                });
                return;
            }

            // Dados salvos em mem√≥ria (localStorage n√£o dispon√≠vel no ambiente)
            console.log('Dados salvos em vari√°veis globais');

            console.log('Aluno registrado:', dadosAluno);

            // Mensagem de boas-vindas
            mostrarModal({
                titulo: 'üéâ Bem-vindo, ' + dadosAluno.nome + '!',
                mensagem: 'Sua jornada est√° prestes a come√ßar. Boa sorte!',
                tipo: 'sucesso'
            });

            // Ir para tela inicial ap√≥s 1.5s
            setTimeout(function() {
                fecharModal();
                mostrarTela('tela-inicial');
            }, 1500);
        }

        // DADOS COMPLETOS DOS 60 EXERC√çCIOS - VERS√ÉO CORRIGIDA COM RESPOSTAS ALEAT√ìRIAS
        var exercicios = {
            'logistica': {
                'decomposicao': [
                    {
                        titulo: 'Decomposi√ß√£o - Entregas Atrasadas',
                        pergunta: 'Entregas atrasadas √© o problema. Qual a primeira divis√£o l√≥gica?',
                        opcoes: [
                            'Planejamento de rotas + Capacidade de ve√≠culos + Fatores externos (tr√¢nsito/clima)',
                            'Motoristas + Gasolina + GPS',
                            'Clientes + Produtos + Embalagens'
                        ],
                        correta: 0, // Ex1 do pilar = posi√ß√£o 0
                        feedback: 'Excelente! Voc√™ dividiu nas 3 dimens√µes estruturais: planejamento (estrat√©gico), recursos (operacional) e ambiente (externo).'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - Otimizar Rotas',
                        pergunta: 'Selecione os 3 componentes ESSENCIAIS para otimizar rotas:',
                        opcoes: [
                            'Cor dos uniformes + Marca do GPS + Tipo de combust√≠vel',
                            'Dist√¢ncia entre pontos + Janelas de hor√°rio + Capacidade de carga',
                            'Idade do motorista + Modelo do carro + M√∫sica tocada'
                        ],
                        correta: 1, // Ex2 do pilar = posi√ß√£o 1
                        feedback: 'Perfeito! Dist√¢ncia (espa√ßo), tempo (janelas) e capacidade (recurso) s√£o os 3 pilares matem√°ticos da otimiza√ß√£o.'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - Estrutura Custos',
                        pergunta: 'Monte uma estrutura hier√°rquica para analisar custos log√≠sticos:',
                        opcoes: [
                            'Custos Fixos ‚Üí Por Ve√≠culo ‚Üí R$/m√™s',
                            'Custos Oportunidade ‚Üí Por KM ‚Üí R$/km',
                            'Custos Vari√°veis ‚Üí Por Entrega ‚Üí R$/pedido'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtima estrutura√ß√£o! Vari√°veis ‚Üí Por Entrega ‚Üí R$/pedido √© hierarquia l√≥gica para controle.'
                    }
                ],
                'padroes': [
                    {
                        titulo: 'Padr√µes - Hor√°rio de Pico',
                        pergunta: '70% dos atrasos ocorrem entre 17h-19h. Que padr√£o isso indica?',
                        opcoes: [
                            'Problema mec√¢nico nos ve√≠culos',
                            'Padr√£o de hor√°rio de pico de tr√¢nsito urbano (rush hour)',
                            'Motoristas cansados neste hor√°rio'
                        ],
                        correta: 1, // Ex1 do pilar = posi√ß√£o 1 (distribui√ß√£o variada)
                        feedback: 'Correto! Padr√£o temporal que coincide com hor√°rio de sa√≠da de escrit√≥rios. Previs√≠vel e sistem√°tico.'
                    },
                    {
                        titulo: 'Padr√µes - Dados Otimiza√ß√£o',
                        pergunta: 'Identifique 3 padr√µes nos dados que podem otimizar rotas:',
                        opcoes: [
                            'Regi√£o Sul +40% pedidos sextas + Clientes corporativos 9h-12h + Chuva +30% tempo',
                            'Motorista Jo√£o √© simp√°tico + Hoje √© quinta + C√©u azul',
                            'Caminh√£o vermelho + GPS novo + Gasolina cara'
                        ],
                        correta: 0, // Ex2 do pilar = posi√ß√£o 0 (distribui√ß√£o variada)
                        feedback: 'Excelente! Voc√™ identificou padr√µes recorrentes e preditivos: sazonalidade, janelas fixas e impacto clim√°tico.'
                    },
                    {
                        titulo: 'Padr√µes - A√ß√£o Proativa',
                        pergunta: 'Baseado no padr√£o "Regi√£o Sul +40% pedidos √†s sextas", que a√ß√£o tomar?',
                        opcoes: [
                            'Aguardar problema acontecer para depois resolver',
                            'Ignorar o padr√£o e manter opera√ß√£o igual',
                            'Alocar mais ve√≠culos para regi√£o Sul antecipadamente √†s sextas'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Reconhecer padr√µes permite a√ß√£o proativa: alocar mais recursos no momento e local previsto.'
                    }
                ],
                'abstracao': [
                    {
                        titulo: 'Abstra√ß√£o - Fator Essencial',
                        pergunta: 'Para calcular rota ideal, qual fator √© ESSENCIAL considerar primeiro?',
                        opcoes: [
                            'Cor do ve√≠culo',
                            'Marca do pneu',
                            'Dist√¢ncia total e tempo estimado'
                        ],
                        correta: 2, // Ex1 do pilar = posi√ß√£o 2 (distribui√ß√£o variada)
                        feedback: 'Perfeito! Dist√¢ncia e tempo s√£o vari√°veis ESSENCIAIS. O resto √© secund√°rio ou irrelevante para o modelo.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Modelo Otimiza√ß√£o',
                        pergunta: 'Ao criar modelo de otimiza√ß√£o de rotas, quais s√£o 3 fatores essenciais?',
                        opcoes: [
                            'Marca caminh√£o + Nome motorista + Cor embalagem',
                            'Temperatura ambiente + Dia da semana + Humor cliente',
                            'Pontos origem/destino + Restri√ß√µes tempo + Custos deslocamento'
                        ],
                        correta: 2, // Ex2 do pilar = posi√ß√£o 2
                        feedback: 'Excelente! Localiza√ß√µes, tempo e custo s√£o as vari√°veis CR√çTICAS do modelo. O resto √© ru√≠do.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Distribui√ß√£o Eficiente',
                        pergunta: 'Crie um modelo abstrato simples para "distribui√ß√£o eficiente":',
                        opcoes: [
                            'Caminh√£o grande + Motorista r√°pido + GPS caro',
                            'Roupa bonita + M√∫sica alta + Perfume no ar',
                            'Menor custo + Menor tempo + M√°ximo atendimento = Otimiza√ß√£o'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Voc√™ focou nos RESULTADOS essenciais: efici√™ncia (custo/tempo) e efic√°cia (atendimento).'
                    }
                ],
                'algoritmos': [
                    {
                        titulo: 'Algoritmos - Sequ√™ncia Planejamento',
                        pergunta: 'Sequ√™ncia l√≥gica para planejar rota de entrega:',
                        opcoes: [
                            'Listar endere√ßos ‚Üí Calcular dist√¢ncias ‚Üí Ordenar por proximidade ‚Üí Validar janelas tempo',
                            'Sair dirigindo ‚Üí Ver onde tem entrega ‚Üí Parar no primeiro',
                            'Ligar clientes ‚Üí Perguntar quem quer primeiro ‚Üí Ir l√°'
                        ],
                        correta: 0, // Ex1 do pilar = posi√ß√£o 0
                        feedback: 'Perfeito! Algoritmo estruturado: dados ‚Üí c√°lculo ‚Üí otimiza√ß√£o ‚Üí valida√ß√£o de restri√ß√µes.'
                    },
                    {
                        titulo: 'Algoritmos - M√∫ltiplas Entregas',
                        pergunta: 'Ordene os passos para otimizar m√∫ltiplas entregas:',
                        opcoes: [
                            '1¬∫ Pintar caminh√£o ‚Üí 2¬∫ Escolher m√∫sica ‚Üí 3¬∫ Verificar fome ‚Üí 4¬∫ Sair dirigindo',
                            '1¬∫ Agrupar por regi√£o ‚Üí 2¬∫ Calcular rota curta ‚Üí 3¬∫ Ordenar prioridade ‚Üí 4¬∫ Ajustar hor√°rios',
                            '1¬∫ Ligar clientes ‚Üí 2¬∫ Pedir opini√£o ‚Üí 3¬∫ Votar melhor ‚Üí 4¬∫ Improvisar'
                        ],
                        correta: 1, // Ex2 do pilar = posi√ß√£o 1
                        feedback: 'Excelente! Algoritmo hier√°rquico: agrupamento ‚Üí otimiza√ß√£o local ‚Üí prioriza√ß√£o ‚Üí ajuste fino.'
                    },
                    {
                        titulo: 'Algoritmos - Decis√£o Prioriza√ß√£o',
                        pergunta: 'Monte algoritmo de decis√£o para priorizar entregas:',
                        opcoes: [
                            'SE cliente simp√°tico E tempo bom ENT√ÉO entregar depois',
                            'SE deadline urgente E cliente priorit√°rio ENT√ÉO entregar primeiro',
                            'SE motorista animado E m√∫sica boa ENT√ÉO acelerar mais'
                        ],
                        correta: 1, // Ex3 do pilar = posi√ß√£o 1 (distribui√ß√£o variada)
                        feedback: '√ìtimo! Deadline + Urg√™ncia ‚Üí Entregar primeiro √© l√≥gica de prioriza√ß√£o eficaz.'
                    }
                ]
            },
            'performance': {
                'decomposicao': [
                    {
                        titulo: 'Decomposi√ß√£o - Equipe Baixa Performance',
                        pergunta: 'Equipe 30% abaixo da meta h√° 3 meses. Qual decomposi√ß√£o inicial √© mais estrat√©gica?',
                        opcoes: [
                            'Sal√°rio + F√©rias + Benef√≠cios',
                            'Computadores + Software + Internet',
                            'Compet√™ncias t√©cnicas + Motiva√ß√£o + Processos de trabalho'
                        ],
                        correta: 2, // Ex1 do pilar = posi√ß√£o 2 (performance)
                        feedback: 'Excelente! Tr√≠ade fundamental: SABER fazer (compet√™ncia) + QUERER fazer (motiva√ß√£o) + TER COMO fazer (processo).'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - Performance Individual',
                        pergunta: 'Componentes para an√°lise de performance individual (selecione 3 essenciais):',
                        opcoes: [
                            'Cor da roupa + Marca notebook + Dist√¢ncia casa-trabalho',
                            'KPIs quantitativos + Qualidade entregas + Feedback stakeholders',
                            'Altura pessoa + Peso pessoa + Idade pessoa'
                        ],
                        correta: 1, // Ex2 do pilar = posi√ß√£o 1
                        feedback: 'Perfeito! Quantidade (KPIs), Qualidade (entregas) e Percep√ß√£o (feedback) = vis√£o 360¬∞ da performance.'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - An√°lise Estruturada',
                        pergunta: 'Estruture an√°lise de baixa performance da equipe:',
                        opcoes: [
                            'N√≠vel Equipe ‚Üí Dimens√£o Habilidades ‚Üí Diagn√≥stico Treinamento',
                            'N√≠vel Individual ‚Üí Dimens√£o Motiva√ß√£o ‚Üí Diagn√≥stico Incentivo',
                            'N√≠vel Organiza√ß√£o ‚Üí Dimens√£o Recursos ‚Üí Diagn√≥stico Melhoria processo'
                        ],
                        correta: 0, // Ex3 do pilar = posi√ß√£o 0
                        feedback: '√ìtimo! Equipe ‚Üí Habilidades ‚Üí Treinamento √© caminho l√≥gico para capacita√ß√£o coletiva.'
                    }
                ],
                'padroes': [
                    {
                        titulo: 'Padr√µes - Performance Temporal',
                        pergunta: 'Performance cai 25% todas as segundas-feiras. Que padr√£o isso revela?',
                        opcoes: [
                            'Problema t√©cnico recorrente nos sistemas',
                            'Padr√£o de desmotiva√ß√£o p√≥s-fim de semana (segunda-feira blues)',
                            'Coincid√™ncia aleat√≥ria sem padr√£o'
                        ],
                        correta: 1, // Ex1 do pilar = posi√ß√£o 1
                        feedback: 'Correto! Padr√£o comportamental previs√≠vel relacionado ao ciclo semanal de trabalho.'
                    },
                    {
                        titulo: 'Padr√µes - Dados Performance',
                        pergunta: 'Identifique padr√µes que afetam performance da equipe:',
                        opcoes: [
                            'Mesa limpa + Caf√© quente + Planta no escrit√≥rio',
                            'Roupa azul + Caneta vermelha + Monitor grande',
                            'Reuni√µes longas -20% produtividade + Metas claras +15% resultado + Feedback semanal +10% motiva√ß√£o'
                        ],
                        correta: 2, // Ex2 do pilar = posi√ß√£o 2
                        feedback: 'Excelente! Voc√™ identificou padr√µes comportamentais que impactam diretamente nos resultados.'
                    },
                    {
                        titulo: 'Padr√µes - Melhoria Cont√≠nua',
                        pergunta: 'Com base no padr√£o "Feedback semanal +10% motiva√ß√£o", que a√ß√£o implementar?',
                        opcoes: [
                            'Aguardar colaboradores pedirem feedback',
                            'Dar feedback apenas quando h√° problemas',
                            'Instituir feedback estruturado toda sexta-feira'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Transformar padr√£o positivo em processo sistem√°tico gera melhoria cont√≠nua.'
                    }
                ],
                'abstracao': [
                    {
                        titulo: 'Abstra√ß√£o - Alta Performance',
                        pergunta: 'O que define ESSENCIALMENTE um profissional de alta performance?',
                        opcoes: [
                            'Entrega resultados + Supera expectativas + Desenvolve outros',
                            'Chega cedo + Fica tarde + Fala bem',
                            'Tem diploma + Veste bem + √â pontual'
                        ],
                        correta: 0, // Ex1 do pilar = posi√ß√£o 0
                        feedback: 'Perfeito! Voc√™ focou no IMPACTO essencial: resultados, supera√ß√£o e multiplica√ß√£o de valor.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Modelo Performance',
                        pergunta: 'Ao criar modelo de avalia√ß√£o de performance, quais s√£o os 3 pilares essenciais?',
                        opcoes: [
                            'Apar√™ncia f√≠sica + Relacionamento pessoal + Forma√ß√£o acad√™mica',
                            'Tempo empresa + Sal√°rio atual + Departamento',
                            'Metas quantitativas + Compet√™ncias comportamentais + Desenvolvimento cont√≠nuo'
                        ],
                        correta: 2, // Ex2 do pilar = posi√ß√£o 2
                        feedback: 'Excelente! Resultados (quantitativo), Comportamentos (qualitativo) e Crescimento (futuro) s√£o essenciais.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Equipe Eficaz',
                        pergunta: 'Defina "equipe de alta performance" em elementos essenciais:',
                        opcoes: [
                            'Pessoas simp√°ticas + Local bonito + Equipamentos caros',
                            'Mesmo time + Mesma sala + Mesmo hor√°rio',
                            'Objetivo comum + Colabora√ß√£o efetiva + Resultados superiores + Melhoria cont√≠nua'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Voc√™ capturou a ess√™ncia: prop√≥sito, sinergia, excel√™ncia e evolu√ß√£o.'
                    }
                ],
                'algoritmos': [
                    {
                        titulo: 'Algoritmos - Diagn√≥stico Performance',
                        pergunta: 'Sequ√™ncia l√≥gica para diagnosticar baixa performance:',
                        opcoes: [
                            'Demitir pessoa ‚Üí Contratar nova ‚Üí Esperar resultado',
                            'Aumentar cobran√ßa ‚Üí Dar bronca ‚Üí Amea√ßar consequ√™ncias',
                            'Coletar dados ‚Üí Identificar gaps ‚Üí Analisar causas ‚Üí Definir a√ß√µes ‚Üí Implementar ‚Üí Monitorar'
                        ],
                        correta: 2, // Ex1 do pilar = posi√ß√£o 2
                        feedback: 'Perfeito! Algoritmo estruturado de diagn√≥stico e melhoria cont√≠nua baseado em dados.'
                    },
                    {
                        titulo: 'Algoritmos - Desenvolvimento Equipe',
                        pergunta: 'Algoritmo para desenvolver performance de equipe:',
                        opcoes: [
                            '1¬∫ Mapear compet√™ncias ‚Üí 2¬∫ Identificar lacunas ‚Üí 3¬∫ Treinar habilidades ‚Üí 4¬∫ Praticar ‚Üí 5¬∫ Avaliar progresso',
                            '1¬∫ Contratar consultoria ‚Üí 2¬∫ Fazer workshop ‚Üí 3¬∫ Esperar milagre',
                            '1¬∫ Aumentar press√£o ‚Üí 2¬∫ Cobrar mais ‚Üí 3¬∫ Punir erros'
                        ],
                        correta: 0, // Ex2 do pilar = posi√ß√£o 0
                        feedback: 'Excelente! Desenvolvimento sistem√°tico: diagn√≥stico ‚Üí gap analysis ‚Üí capacita√ß√£o ‚Üí pr√°tica ‚Üí medi√ß√£o.'
                    },
                    {
                        titulo: 'Algoritmos - Feedback Eficaz',
                        pergunta: 'Monte algoritmo de feedback para melhorar performance:',
                        opcoes: [
                            'SE pessoa ruim ENT√ÉO demitir + contratar outro',
                            'SE performance baixa ENT√ÉO feedback espec√≠fico + plano a√ß√£o + prazo + suporte',
                            'SE problema existe ENT√ÉO ignorar + esperar resolver sozinho'
                        ],
                        correta: 1, // Ex3 do pilar = posi√ß√£o 1
                        feedback: '√ìtimo! Feedback estruturado: diagn√≥stico espec√≠fico + plano de a√ß√£o + acompanhamento.'
                    }
                ]
            },
            'estoque': {
                'decomposicao': [
                    {
                        titulo: 'Decomposi√ß√£o - Gest√£o Estoque',
                        pergunta: 'R$ 500k parados + 15% falta itens top. Como decompor este problema?',
                        opcoes: [
                            'Fornecedores ruins + Sistema antigo + Funcion√°rios pregui√ßosos',
                            'Excesso itens baixo giro + Falta itens alto giro + Previs√£o demanda ruim',
                            'Produtos caros + Clientes exigentes + Concorr√™ncia forte'
                        ],
                        correta: 1, // Ex1 do pilar = posi√ß√£o 1 (estoque)
                        feedback: 'Excelente! Voc√™ identificou as 3 dimens√µes: sobra (dinheiro parado), falta (oportunidade perdida) e causa (previs√£o).'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - An√°lise ABC',
                        pergunta: 'Para categorizar estoque, selecione os 3 crit√©rios essenciais da an√°lise ABC:',
                        opcoes: [
                            'Valor financeiro + Volume vendas + Margem lucro',
                            'Cor produto + Tamanho embalagem + Peso item',
                            'Fornecedor + Origem + Data fabrica√ß√£o'
                        ],
                        correta: 0, // Ex2 do pilar = posi√ß√£o 0
                        feedback: 'Perfeito! Valor (impacto financeiro), Volume (quantidade) e Margem (rentabilidade) s√£o os pilares ABC.'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - Estrutura Controle',
                        pergunta: 'Estruture um sistema de controle de estoque:',
                        opcoes: [
                            'Comprar ‚Üí Guardar ‚Üí Esquecer ‚Üí Lembrar quando acabar',
                            'Entrada ‚Üí Movimenta√ß√£o ‚Üí Sa√≠da ‚Üí Saldo atual ‚Üí Ponto pedido',
                            'Fornecedor ‚Üí Produto ‚Üí Cliente ‚Üí Dinheiro'
                        ],
                        correta: 1, // Ex3 do pilar = posi√ß√£o 1
                        feedback: '√ìtima estrutura! Fluxo l√≥gico de controle: entrada, movimenta√ß√£o, sa√≠da, posi√ß√£o e reposi√ß√£o.'
                    }
                ],
                'padroes': [
                    {
                        titulo: 'Padr√µes - Sazonalidade',
                        pergunta: 'Produto X vende 300% mais em dezembro. Que padr√£o sazonal aplicar?',
                        opcoes: [
                            'Padr√£o aleat√≥rio: manter estoque igual o ano todo',
                            'Padr√£o de sorte: comprar mais apenas em dezembro',
                            'Padr√£o natalino: aumentar estoque 200% em novembro para atender demanda'
                        ],
                        correta: 2, // Ex1 do pilar = posi√ß√£o 2
                        feedback: 'Correto! Antecipar compras baseado em padr√£o sazonal previs√≠vel para otimizar vendas e fluxo de caixa.'
                    },
                    {
                        titulo: 'Padr√µes - Comportamento Consumo',
                        pergunta: 'Identifique padr√µes de consumo que otimizam estoque:',
                        opcoes: [
                            'Produtos bonitos + Embalagens coloridas + Pre√ßos redondos',
                            'Segundas +20% energia + Sextas +30% alimenta√ß√£o + Chuva -15% roupas',
                            'Funcion√°rio Jo√£o + Cliente Maria + Fornecedor Silva'
                        ],
                        correta: 1, // Ex2 do pilar = posi√ß√£o 1
                        feedback: 'Excelente! Padr√µes temporais e clim√°ticos permitem ajustar estoque antecipadamente √†s varia√ß√µes de demanda.'
                    },
                    {
                        titulo: 'Padr√µes - Ponto Pedido',
                        pergunta: 'Com padr√£o "Lead time 7 dias + venda 50 unid/dia", qual ponto pedido?',
                        opcoes: [
                            'Pedir quando acabar o produto',
                            'Pedir aleatoriamente quando lembrar',
                            'Pedir quando atingir 350 unidades (7 √ó 50) + estoque seguran√ßa'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! C√°lculo baseado em padr√µes: lead time √ó consumo m√©dio = ponto pedido otimizado.'
                    }
                ],
                'abstracao': [
                    {
                        titulo: 'Abstra√ß√£o - Estoque Ideal',
                        pergunta: 'O que define ESSENCIALMENTE um "estoque ideal"?',
                        opcoes: [
                            'Atender demanda + Menor custo + Menor risco + Maior giro',
                            'Maior quantidade + Maior variedade + Maior valor',
                            'Produtos bonitos + Organiza√ß√£o visual + Local amplo'
                        ],
                        correta: 0, // Ex1 do pilar = posi√ß√£o 0
                        feedback: 'Perfeito! Voc√™ focou nos objetivos essenciais: disponibilidade, economia, seguran√ßa e efici√™ncia.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Modelo Previs√£o',
                        pergunta: 'Elementos essenciais para modelo de previs√£o de demanda:',
                        opcoes: [
                            'Cor preferida + Opini√£o pessoal + Intui√ß√£o + Sorte',
                            'Concorrente + Fornecedor + Cliente + Produto',
                            'Hist√≥rico vendas + Tend√™ncias mercado + Sazonalidade + Eventos especiais'
                        ],
                        correta: 2, // Ex2 do pilar = posi√ß√£o 2
                        feedback: 'Excelente! Dados hist√≥ricos, tend√™ncias, ciclos e varia√ß√µes s√£o as vari√°veis cr√≠ticas de previs√£o.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Otimiza√ß√£o Capital',
                        pergunta: 'Defina "otimiza√ß√£o de capital em estoque" essencialmente:',
                        opcoes: [
                            'Comprar barato + Vender caro + Guardar muito + Estocar tudo',
                            'Local grande + Produto variado + Sistema caro + Funcion√°rio especializado',
                            'M√≠nimo investimento + M√°ximo atendimento + Menor risco ruptura + Maior rentabilidade'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Equil√≠brio entre efici√™ncia financeira (m√≠nimo investimento) e efic√°cia operacional (m√°ximo atendimento).'
                    }
                ],
                'algoritmos': [
                    {
                        titulo: 'Algoritmos - Reposi√ß√£o Estoque',
                        pergunta: 'Sequ√™ncia l√≥gica para reposi√ß√£o de estoque:',
                        opcoes: [
                            'Esperar acabar ‚Üí Correr atr√°s ‚Üí Comprar qualquer coisa ‚Üí Torcer dar certo',
                            'Monitorar saldo ‚Üí Calcular ponto pedido ‚Üí Verificar lead time ‚Üí Definir quantidade ‚Üí Emitir pedido',
                            'Comprar muito ‚Üí Estocar tudo ‚Üí Esperar vender ‚Üí Rezar n√£o estragar'
                        ],
                        correta: 1, // Ex1 do pilar = posi√ß√£o 1
                        feedback: 'Perfeito! Algoritmo de reposi√ß√£o baseado em dados e c√°lculos, n√£o em improviso.'
                    },
                    {
                        titulo: 'Algoritmos - Classifica√ß√£o ABC',
                        pergunta: 'Algoritmo para classificar produtos ABC:',
                        opcoes: [
                            '1¬∫ Contar produtos ‚Üí 2¬∫ Dividir por 3 ‚Üí 3¬∫ Sortear categorias',
                            '1¬∫ Escolher favoritos ‚Üí 2¬∫ Separar que vende ‚Üí 3¬∫ Ignorar resto',
                            '1¬∫ Calcular faturamento/produto ‚Üí 2¬∫ Ordenar maior‚Üímenor ‚Üí 3¬∫ Classificar A(80%), B(15%), C(5%)'
                        ],
                        correta: 2, // Ex2 do pilar = posi√ß√£o 2
                        feedback: 'Excelente! Classifica√ß√£o ABC baseada em an√°lise de Pareto: faturamento ordenado em categorias proporcionais.'
                    },
                    {
                        titulo: 'Algoritmos - Decis√£o Compra',
                        pergunta: 'Monte algoritmo de decis√£o para compras:',
                        opcoes: [
                            'SE saldo ‚â§ ponto_pedido E lead_time ‚â§ prazo_entrega ENT√ÉO comprar quantidade_otima',
                            'SE produto bonito E pre√ßo bom ENT√ÉO comprar muito',
                            'SE fornecedor ligou E vendedor insistiu ENT√ÉO comprar algo'
                        ],
                        correta: 0, // Ex3 do pilar = posi√ß√£o 0
                        feedback: '√ìtimo! Decis√£o baseada em par√¢metros calculados: saldo atual vs ponto cr√≠tico + prazo dispon√≠vel.'
                    }
                ]
            },
            'rh': {
                'decomposicao': [
                    {
                        titulo: 'Decomposi√ß√£o - Recrutamento',
                        pergunta: '300 curr√≠culos para 3 vagas em 2 semanas. Como decompor este desafio?',
                        opcoes: [
                            'Sorteio aleat√≥rio + Entrevista r√°pida + Contratar primeiro',
                            'Indica√ß√£o amigos + Curr√≠culo bonito + Simpatia pessoal',
                            'Triagem curr√≠culos + Entrevistas t√©cnicas + Avalia√ß√£o cultural + Decis√£o final'
                        ],
                        correta: 2, // Ex1 do pilar = posi√ß√£o 2 (rh)
                        feedback: 'Excelente! Processo estruturado em etapas: filtro inicial, compet√™ncias t√©cnicas, fit cultural e escolha.'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - Perfil Candidato',
                        pergunta: 'Para avaliar candidato, quais s√£o os 3 componentes essenciais?',
                        opcoes: [
                            'Apar√™ncia f√≠sica + Roupa bonita + Carro novo',
                            'Compet√™ncias t√©cnicas + Compet√™ncias comportamentais + Potencial desenvolvimento',
                            'Faculdade famosa + Sal√°rio baixo + Disponibilidade total'
                        ],
                        correta: 1, // Ex2 do pilar = posi√ß√£o 1
                        feedback: 'Perfeito! Tr√≠ade essencial: SABER fazer (t√©cnico), SER adequado (comportamental), CRESCER (potencial).'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - Processo Seletivo',
                        pergunta: 'Estruture um processo seletivo eficiente:',
                        opcoes: [
                            'Olhar curr√≠culo ‚Üí Gostar foto ‚Üí Contratar r√°pido',
                            'Pedir indica√ß√£o ‚Üí Confiar amigo ‚Üí N√£o avaliar',
                            'An√°lise curr√≠culos ‚Üí Testes t√©cnicos ‚Üí Din√¢micas grupo ‚Üí Entrevistas ‚Üí Refer√™ncias ‚Üí Decis√£o'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtima estrutura! Funil progressivo: filtros quantitativos ‚Üí qualitativos ‚Üí decis√£o embasada.'
                    }
                ],
                'padroes': [
                    {
                        titulo: 'Padr√µes - Perfil Sucesso',
                        pergunta: 'Top performers da empresa t√™m: experi√™ncia X + skill Y + atitude Z. Que padr√£o usar?',
                        opcoes: [
                            'Buscar candidatos com combina√ß√£o X+Y+Z para prever sucesso futuro',
                            'Ignorar padr√£o e contratar perfil totalmente diferente',
                            'Contratar apenas baseado em sorte e simpatia'
                        ],
                        correta: 0, // Ex1 do pilar = posi√ß√£o 0
                        feedback: 'Correto! Padr√µes de sucesso interno s√£o preditores estat√≠sticos para futuras contrata√ß√µes.'
                    },
                    {
                        titulo: 'Padr√µes - Fonte Recrutamento',
                        pergunta: 'Identifique padr√µes de fontes de recrutamento mais eficazes:',
                        opcoes: [
                            'Jornal papel + Placa na porta + Boca a boca',
                            'Cor cabelo + Signo astrol√≥gico + N√∫mero sapato',
                            'LinkedIn 40% aprova√ß√£o + Indica√ß√µes 60% reten√ß√£o + Universidades 30% trainee'
                        ],
                        correta: 2, // Ex2 do pilar = posi√ß√£o 2
                        feedback: 'Excelente! Padr√µes por canal: taxa sucesso LinkedIn, reten√ß√£o indica√ß√µes, potencial universidades.'
                    },
                    {
                        titulo: 'Padr√µes - Tempo Processo',
                        pergunta: 'Padr√£o: processos >30 dias perdem 70% candidatos. Como usar isso?',
                        opcoes: [
                            'Manter processo longo e aceitar perder candidatos',
                            'Acelerar apenas √∫ltima etapa mas manter resto lento',
                            'Redesenhar processo para m√°ximo 21 dias e comunicar prazos claramente'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Otimizar processo baseado em padr√£o comportamental: rapidez aumenta engajamento e convers√£o.'
                    }
                ],
                'abstracao': [
                    {
                        titulo: 'Abstra√ß√£o - Candidato Ideal',
                        pergunta: 'O que define ESSENCIALMENTE um "candidato ideal"?',
                        opcoes: [
                            'Gradua√ß√£o cara + Apar√™ncia boa + Fala bem + Mora perto',
                            'Compet√™ncia para fun√ß√£o + Fit cultural + Motiva√ß√£o + Potencial crescimento',
                            'Aceita sal√°rio baixo + Trabalha muito + N√£o reclama + Obedece tudo'
                        ],
                        correta: 1, // Ex1 do pilar = posi√ß√£o 1
                        feedback: 'Perfeito! Voc√™ focou no essencial: capacidade t√©cnica, alinhamento, engajamento e desenvolvimento.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Processo Eficaz',
                        pergunta: 'Elementos essenciais de processo seletivo eficaz:',
                        opcoes: [
                            'Entrevistador simp√°tico + Sala bonita + Caf√© gostoso + Conversa informal',
                            'Processo r√°pido + Decis√£o intuitiva + Contrata√ß√£o imediata + Sem burocracia',
                            'Crit√©rios objetivos + Avalia√ß√£o padronizada + Decis√£o baseada dados + Experi√™ncia positiva'
                        ],
                        correta: 2, // Ex2 do pilar = posi√ß√£o 2
                        feedback: 'Excelente! Objetividade, padroniza√ß√£o, dados e experi√™ncia s√£o pilares de processo profissional.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Recrutamento Estrat√©gico',
                        pergunta: 'Defina "recrutamento estrat√©gico" essencialmente:',
                        opcoes: [
                            'Contratar r√°pido + Pagar barato + Exigir muito + Substituir f√°cil',
                            'Processo bonito + Marca famosa + Escrit√≥rio chique + Benef√≠cio caro',
                            'Atrair melhor talento + Avaliar adequa√ß√£o + Predizer sucesso + Reter longo prazo'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Recrutamento estrat√©gico visa qualidade do match e sustentabilidade da rela√ß√£o.'
                    }
                ],
                'algoritmos': [
                    {
                        titulo: 'Algoritmos - Triagem Curr√≠culos',
                        pergunta: 'Sequ√™ncia l√≥gica para triar 300 curr√≠culos rapidamente:',
                        opcoes: [
                            'Ler todos ‚Üí Decidir na intui√ß√£o ‚Üí Escolher favoritos ‚Üí Chamar alguns',
                            'Sortear aleat√≥rio ‚Üí Entrevistar primeiro ‚Üí Contratar que gostar',
                            'Definir crit√©rios ‚Üí Filtrar autom√°tico ‚Üí Pontua√ß√£o ponderada ‚Üí Ranking ‚Üí Top 30 ‚Üí An√°lise detalhada'
                        ],
                        correta: 2, // Ex1 do pilar = posi√ß√£o 2
                        feedback: 'Perfeito! Algoritmo de triagem: crit√©rios claros ‚Üí automa√ß√£o ‚Üí scoring ‚Üí prioriza√ß√£o ‚Üí an√°lise qualitativa.'
                    },
                    {
                        titulo: 'Algoritmos - Score Candidato',
                        pergunta: 'Algoritmo para pontuar candidatos:',
                        opcoes: [
                            'Beleza√ó10 + Simpatia√ó5 + Sorte√ó3 = Contrata√ß√£o',
                            'Experi√™ncia√ó3 + Forma√ß√£o√ó2 + Skills√ó4 + Cultural√ó5 = Score total (0-100)',
                            'Curr√≠culo bonito + Entrevista boa + Feeling positivo = Aprovado'
                        ],
                        correta: 1, // Ex2 do pilar = posi√ß√£o 1
                        feedback: 'Excelente! Score ponderado com pesos baseados em import√¢ncia: prioriza fit cultural e compet√™ncias.'
                    },
                    {
                        titulo: 'Algoritmos - Decis√£o Final',
                        pergunta: 'Monte algoritmo de decis√£o para contrata√ß√£o:',
                        opcoes: [
                            'SE candidato simp√°tico E entrevistador gostou ENT√ÉO contratar r√°pido',
                            'SE score‚â•80 E aprova√ß√£o_gestor=SIM E refer√™ncias=OK ENT√ÉO contratar',
                            'SE curr√≠culo bonito E dispon√≠vel_agora ENT√ÉO chamar imediatamente'
                        ],
                        correta: 1, // Ex3 do pilar = posi√ß√£o 1
                        feedback: '√ìtimo! Decis√£o baseada em crit√©rios objetivos: performance, aprova√ß√£o e valida√ß√£o externa.'
                    }
                ]
            },
            'marketing': {
                'decomposicao': [
                    {
                        titulo: 'Decomposi√ß√£o - Email Marketing',
                        pergunta: '50k clientes, 2% taxa abertura emails. Como decompor este problema?',
                        opcoes: [
                            'Servidor email + Ferramenta cara + Designer famoso + Textos longos',
                            'Lista qualidade + Conte√∫do relevante + Timing envio + Personaliza√ß√£o',
                            'Muitos emails + Assunto gen√©rico + Hor√°rio qualquer + Para todos igual'
                        ],
                        correta: 1, // Ex1 do pilar = posi√ß√£o 1 (marketing)
                        feedback: 'Excelente! 4 pilares do email marketing eficaz: audi√™ncia qualificada, conte√∫do relevante, momento certo e personaliza√ß√£o.'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - Funil Convers√£o',
                        pergunta: 'Para otimizar convers√µes, quais s√£o os 3 est√°gios essenciais do funil?',
                        opcoes: [
                            'Atra√ß√£o (topo) + Considera√ß√£o (meio) + Convers√£o (fundo)',
                            'Site bonito + Redes sociais + Email barato',
                            'Propaganda cara + Desconto grande + Press√£o venda'
                        ],
                        correta: 0, // Ex2 do pilar = posi√ß√£o 0
                        feedback: 'Perfeito! Funil TOFU‚ÜíMOFU‚ÜíBOFU: despertar interesse ‚Üí nutrir relacionamento ‚Üí converter em venda.'
                    },
                    {
                        titulo: 'Decomposi√ß√£o - Campanha Digital',
                        pergunta: 'Estruture uma campanha de marketing digital:',
                        opcoes: [
                            'Gastar dinheiro + Fazer propaganda + Esperar resultado',
                            'Persona + Objetivos + Canais + Conte√∫do + M√©tricas + Otimiza√ß√£o',
                            'Copiar concorrente + Usar mesmo texto + Torcer dar certo'
                        ],
                        correta: 1, // Ex3 do pilar = posi√ß√£o 1
                        feedback: '√ìtima estrutura! Campanha estrat√©gica: p√∫blico-alvo ‚Üí meta ‚Üí meio ‚Üí mensagem ‚Üí medi√ß√£o ‚Üí melhoria.'
                    }
                ],
                'padroes': [
                    {
                        titulo: 'Padr√µes - Comportamento Digital',
                        pergunta: 'Emails enviados ter√ßas 10h t√™m 25% mais abertura. Que padr√£o aplicar?',
                        opcoes: [
                            'Concentrar envios nas ter√ßas 10h para maximizar engajamento',
                            'Ignorar padr√£o e enviar hor√°rio aleat√≥rio',
                            'Enviar apenas sextas √† noite para ser diferente'
                        ],
                        correta: 0, // Ex1 do pilar = posi√ß√£o 0
                        feedback: 'Correto! Otimizar timing baseado em padr√µes comportamentais da audi√™ncia aumenta performance.'
                    },
                    {
                        titulo: 'Padr√µes - Segmenta√ß√£o',
                        pergunta: 'Identifique padr√µes de segmenta√ß√£o que melhoram resultados:',
                        opcoes: [
                            'Pessoas bonitas + Carros caros + Casas grandes',
                            'Nome comum + Sobrenome f√°cil + Email curto',
                            'Idade 25-35 +40% convers√£o + Mobile +60% acesso + Conte√∫do v√≠deo +80% engajamento'
                        ],
                        correta: 2, // Ex2 do pilar = posi√ß√£o 2
                        feedback: 'Excelente! Padr√µes demogr√°ficos, tecnol√≥gicos e de conte√∫do orientam segmenta√ß√£o eficaz.'
                    },
                    {
                        titulo: 'Padr√µes - Jornada Cliente',
                        pergunta: 'Padr√£o: 7 touchpoints antes da compra. Como usar estrategicamente?',
                        opcoes: [
                            'Bombardear cliente com 20 mensagens no primeiro dia',
                            'Enviar apenas 1 email e esperar compra imediata',
                            'Criar sequ√™ncia de 7 conte√∫dos progressivos para nutrir leads at√© convers√£o'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Nutrir relacionamento progressivamente respeitando jornada natural do cliente at√© decis√£o.'
                    }
                ],
                'abstracao': [
                    {
                        titulo: 'Abstra√ß√£o - Marketing Eficaz',
                        pergunta: 'O que define ESSENCIALMENTE "marketing digital eficaz"?',
                        opcoes: [
                            'Gasto alto + Ferramenta cara + Ag√™ncia famosa + Resultado incerto',
                            'Muita propaganda + Desconto grande + Press√£o vendas + Spam constante',
                            'Mensagem certa + Pessoa certa + Momento certo + Canal certo = ROI positivo'
                        ],
                        correta: 2, // Ex1 do pilar = posi√ß√£o 2
                        feedback: 'Perfeito! Marketing eficaz √© sobre precis√£o: right message, right person, right time, right channel.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Convers√£o',
                        pergunta: 'Elementos essenciais para otimizar convers√µes:',
                        opcoes: [
                            'Proposta valor clara + Prova social + Urg√™ncia + Call-to-action √≥bvio',
                            'Site colorido + Texto longo + Imagem grande + M√∫sica fundo',
                            'Pre√ßo baixo + Desconto sempre + Promo√ß√£o infinita + Press√£o m√°xima'
                        ],
                        correta: 0, // Ex2 do pilar = posi√ß√£o 0
                        feedback: 'Excelente! Convers√£o depende de: benef√≠cio claro, credibilidade, motiva√ß√£o temporal e a√ß√£o simples.'
                    },
                    {
                        titulo: 'Abstra√ß√£o - Relacionamento Cliente',
                        pergunta: 'Defina "relacionamento digital duradouro" essencialmente:',
                        opcoes: [
                            'Spam frequente + Oferta sempre + Desconto eterno + Press√£o constante',
                            'Email di√°rio + Promo√ß√£o semanal + Liga√ß√£o mensal + Visita anual',
                            'Valor consistente + Comunica√ß√£o relevante + Experi√™ncia positiva + Confian√ßa m√∫tua'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Relacionamento sustent√°vel baseia-se em valor, relev√¢ncia, experi√™ncia e confian√ßa m√∫tuos.'
                    }
                ],
                'algoritmos': [
                    {
                        titulo: 'Algoritmos - Segmenta√ß√£o Autom√°tica',
                        pergunta: 'Sequ√™ncia l√≥gica para segmentar audi√™ncia automaticamente:',
                        opcoes: [
                            'Dividir por idade ‚Üí Separar por sexo ‚Üí Mandar email igual ‚Üí Esperar resultado',
                            'Coletar dados ‚Üí Definir crit√©rios ‚Üí Agrupar similaridades ‚Üí Personalizar mensagem ‚Üí Testar performance',
                            'Pegar lista completa ‚Üí Enviar para todos ‚Üí Torcer alguns abrirem'
                        ],
                        correta: 1, // Ex1 do pilar = posi√ß√£o 1
                        feedback: 'Perfeito! Segmenta√ß√£o inteligente: dados ‚Üí crit√©rios ‚Üí clustering ‚Üí personaliza√ß√£o ‚Üí otimiza√ß√£o.'
                    },
                    {
                        titulo: 'Algoritmos - A/B Testing',
                        pergunta: 'Algoritmo para teste A/B em campanha email:',
                        opcoes: [
                            '1¬∫ Fazer 2 emails ‚Üí 2¬∫ Mandar para alguns ‚Üí 3¬∫ Ver qual teve mais sorte',
                            '1¬∫ Copiar concorrente ‚Üí 2¬∫ Mudar cor ‚Üí 3¬∫ Enviar diferente ‚Üí 4¬∫ Contar cliques',
                            '1¬∫ Hip√≥tese ‚Üí 2¬∫ Vers√µes A/B ‚Üí 3¬∫ Split audi√™ncia ‚Üí 4¬∫ Medir resultados ‚Üí 5¬∫ Implementar vencedor'
                        ],
                        correta: 2, // Ex2 do pilar = posi√ß√£o 2
                        feedback: 'Excelente! Metodologia cient√≠fica: hip√≥tese ‚Üí experimento ‚Üí medi√ß√£o ‚Üí decis√£o baseada em dados.'
                    },
                    {
                        titulo: 'Algoritmos - Automa√ß√£o Marketing',
                        pergunta: 'Monte algoritmo de automa√ß√£o para leads:',
                        opcoes: [
                            'SE pessoa cadastrou ENT√ÉO mandar tudo que temos',
                            'SE cliente rico ENT√ÉO ligar muito, SEN√ÉO ignorar',
                            'SE lead_score‚â•70 ENT√ÉO email_vendas, SEN√ÉO SE ‚â•40 ENT√ÉO nutrir_conteudo, SEN√ÉO reengajamento'
                        ],
                        correta: 2, // Ex3 do pilar = posi√ß√£o 2
                        feedback: '√ìtimo! Automa√ß√£o inteligente: score qualifica lead ‚Üí a√ß√£o personalizada ‚Üí jornada adequada ao perfil.'
                    }
                ]
            }
        };

        // FUN√á√ÉO 1: Mostrar Tela
        function mostrarTela(idTela) {
            console.log('');
            console.log('‚Üí MOSTRAR TELA: ' + idTela);
            console.log('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ');

            // Esconder todas
            var telas = document.getElementsByClassName('tela');
            for (var i = 0; i < telas.length; i++) {
                telas[i].style.display = 'none';
                telas[i].classList.remove('ativa');
                console.log('üôà Escondendo: ' + telas[i].id);
            }

            // Mostrar espec√≠fica
            var tela = document.getElementById(idTela);
            if (tela) {
                tela.style.display = 'block';
                tela.classList.add('ativa');
                console.log('üëÅÔ∏è Mostrando: ' + idTela);
            } else {
                console.error('‚ùå Tela N√ÉO encontrada: ' + idTela);
            }

            window.scrollTo(0, 0);
        }

        // FUN√á√ÉO 2: Ir para Problemas
        function irParaProblemas() {
            console.log('');
            console.log('üöÄ COME√áAR JORNADA - Bot√£o clicado!');
            mostrarTela('tela-problemas');
        }

        // FUN√á√ÉO 3: Selecionar Problema COM MODAL
        function selecionarProblema(problema) {
            console.log('');
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            console.log('‚úì BOT√ÉO SELECIONAR CLICADO!');
            console.log('Problema: ' + problema);
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');

            var nomeProblema = obterNomeProblema(problema);

            mostrarModal({
                titulo: 'üéØ Confirmar Escolha',
                mensagem: 'Voc√™ escolheu: ' + nomeProblema + '\n\n' +
                          'üìã 12 exerc√≠cios (4 pilares √ó 3)\n' +
                          'üéØ M√°ximo 120 pontos\n\n' +
                          '‚ö†Ô∏è ATEN√á√ÉO: Ap√≥s confirmar, voc√™ N√ÉO poder√° trocar de problema!',
                tipo: 'confirmacao',
                onConfirmar: function() {
                    console.log('‚úì Usu√°rio confirmou');
                    confirmarSelecaoProblema(problema);
                }
            });
        }

        function confirmarSelecaoProblema(problema) {
            console.log('');
            console.log('‚úÖ PROBLEMA CONFIRMADO E SELECIONADO: ' + problema);
            estadoJornada.problemaEscolhido = problema;

            // Salvar problema escolhido (sem usar localStorage devido √†s restri√ß√µes)
            console.log('‚úì Problema salvo no estado:', problema);

            // Mostrar contexto expandido do problema
            mostrarContextoProblema(problema);
        }

        // NOVA FUN√á√ÉO: Mostrar Contexto do Problema
        function mostrarContextoProblema(problema) {
            var contextosProblemas = {
                'logistica': {
                    icone: 'üöö',
                    titulo: 'Log√≠stica E-commerce',
                    situacao: 'Sua empresa de e-commerce cresceu 200% no √∫ltimo ano. Com esse crescimento acelerado, surgiram desafios significativos na opera√ß√£o log√≠stica.',
                    desafios: [
                        'Reclama√ß√µes de atraso aumentaram 40%',
                        'Custos de entrega subiram 35%',
                        'Taxa de satisfa√ß√£o dos clientes caiu de 92% para 78%',
                        'Equipe de log√≠stica sobrecarregada'
                    ],
                    objetivo: 'Aplicar os 4 pilares do Pensamento Computacional para analisar o problema, identificar padr√µes, abstrair o essencial e criar algoritmos de solu√ß√£o. Voc√™ resolver√° 12 exerc√≠cios pr√°ticos baseados neste cen√°rio real.'
                },
                'performance': {
                    icone: 'üìä',
                    titulo: 'Gest√£o de Performance',
                    situacao: 'Sua equipe est√° 30% abaixo da meta h√° 3 meses consecutivos. O desempenho individual e coletivo preocupa a lideran√ßa e afeta os resultados da empresa.',
                    desafios: [
                        'Produtividade da equipe em decl√≠nio constante',
                        'Metas n√£o atingidas por 3 meses seguidos',
                        'Motiva√ß√£o da equipe em baixa',
                        'Processos ineficientes identificados'
                    ],
                    objetivo: 'Usar pensamento computacional para diagnosticar causas da baixa performance, identificar padr√µes comportamentais, abstrair fatores cr√≠ticos e criar algoritmos de melhoria cont√≠nua.'
                },
                'estoque': {
                    icone: 'üì¶',
                    titulo: 'Gest√£o de Estoque',
                    situacao: 'R$ 500 mil em capital parado no estoque, enquanto 15% dos itens mais vendidos est√£o em falta. O equil√≠brio entre disponibilidade e investimento est√° cr√≠tico.',
                    desafios: [
                        'Capital alto investido em produtos parados',
                        'Ruptura de estoque em itens estrat√©gicos',
                        'Previs√£o de demanda imprecisa',
                        'Custos de armazenagem elevados'
                    ],
                    objetivo: 'Aplicar pensamento computacional para otimizar n√≠veis de estoque, criar padr√µes de previs√£o, abstrair vari√°veis essenciais e desenvolver algoritmos de reposi√ß√£o inteligente.'
                },
                'rh': {
                    icone: 'üë•',
                    titulo: 'Recrutamento RH',
                    situacao: '300 curr√≠culos recebidos para 3 vagas em apenas 2 semanas. O processo de sele√ß√£o precisa ser eficiente para identificar os melhores candidatos rapidamente.',
                    desafios: [
                        'Volume alto de candidatos para avaliar',
                        'Prazo apertado para tomada de decis√£o',
                        'Necessidade de crit√©rios objetivos de sele√ß√£o',
                        'Risco de perder bons candidatos por demora'
                    ],
                    objetivo: 'Usar pensamento computacional para estruturar processo seletivo, identificar padr√µes de sucesso, abstrair compet√™ncias essenciais e criar algoritmos de triagem e avalia√ß√£o.'
                },
                'marketing': {
                    icone: 'üì±',
                    titulo: 'Marketing Digital',
                    situacao: 'Base de 50 mil clientes, mas apenas 2% de taxa de abertura dos emails. O engajamento est√° baixo e o ROI das campanhas digitais est√° negativo.',
                    desafios: [
                        'Taxa de abertura muito abaixo da m√©dia do setor',
                        'Baixo engajamento nas redes sociais',
                        'ROI negativo das campanhas pagas',
                        'Segmenta√ß√£o de audi√™ncia inadequada'
                    ],
                    objetivo: 'Aplicar pensamento computacional para otimizar campanhas, identificar padr√µes de comportamento digital, abstrair elementos de convers√£o e criar algoritmos de personaliza√ß√£o.'
                }
            };

            var contexto = contextosProblemas[problema];
            if (!contexto) return;

            // Atualizar elementos na tela de contexto
            document.getElementById('contexto-problema-icone').textContent = contexto.icone;
            document.getElementById('contexto-problema-titulo').textContent = contexto.titulo;
            document.getElementById('contexto-situacao').textContent = contexto.situacao;
            document.getElementById('contexto-objetivo').textContent = contexto.objetivo;

            // Atualizar lista de desafios
            var listaDesafios = document.getElementById('contexto-desafios-lista');
            listaDesafios.innerHTML = '';
            for (var i = 0; i < contexto.desafios.length; i++) {
                var li = document.createElement('li');
                li.textContent = contexto.desafios[i];
                listaDesafios.appendChild(li);
            }

            mostrarTela('tela-contexto-problema');
        }

        // NOVA FUN√á√ÉO: Iniciar Pilares (chamada do bot√£o no contexto)
        function iniciarPilares() {
            // Bloquear navega√ß√£o de volta
            var navegacaoProblemas = document.getElementById('navegacao-problemas');
            if (navegacaoProblemas) {
                navegacaoProblemas.style.display = 'none';
            }

            // Atualizar subt√≠tulo
            var subtitulo = document.getElementById('problema-selecionado');
            if (subtitulo) {
                var nomeProblema = obterNomeProblema(estadoJornada.problemaEscolhido);
                subtitulo.innerHTML = 'üéØ <strong>' + nomeProblema + '</strong> - 12 exerc√≠cios para dominar!';
            }

            mostrarTela('tela-pilares');
            atualizarDisplaysPilares();
        }

        function obterNomeProblema(problema) {
            var nomes = {
                'logistica': 'Log√≠stica E-commerce üöö',
                'performance': 'Gest√£o de Performance üìä',
                'estoque': 'Gest√£o de Estoque üì¶',
                'rh': 'Recrutamento RH üë•',
                'marketing': 'Marketing Digital üì±'
            };
            return nomes[problema] || problema;
        }

        // FUN√á√ÉO 4: Iniciar Exerc√≠cios
        function iniciarExercicios(pilar) {
            console.log('');
            console.log('‚úì PILAR SELECIONADO: ' + pilar);
            estadoJornada.pilarAtual = pilar;
            estadoJornada.exercicioAtual = 1; // Iniciar do exerc√≠cio 1

            mostrarTela('tela-exercicio');
            carregarExercicio();
            atualizarDisplaysExercicio();
        }

        // FUN√á√ÉO 5: Carregar Exerc√≠cio - COM M√âTRICAS
        function carregarExercicio() {
            console.log('');
            console.log('üìù CARREGANDO EXERC√çCIO:');
            console.log('  Problema: ' + estadoJornada.problemaEscolhido);
            console.log('  Pilar: ' + estadoJornada.pilarAtual);
            console.log('  Exerc√≠cio: ' + estadoJornada.exercicioAtual + '/3');

            // Resetar estado do exerc√≠cio
            exercicioAtualEstado = {
                tentativas: 0,
                acertou: false,
                pulou: false,
                respostaAluno: null,
                tempoInicio: new Date()
            };

            // Verificar se dados existem
            if (!exercicios[estadoJornada.problemaEscolhido] || !exercicios[estadoJornada.problemaEscolhido][estadoJornada.pilarAtual]) {
                console.error('‚ùå Exerc√≠cios n√£o encontrados');
                document.getElementById('exercicio-pergunta').innerHTML =
                    'Exerc√≠cios em desenvolvimento para ' + estadoJornada.pilarAtual + ' em ' + estadoJornada.problemaEscolhido;
                return;
            }

            var exerciciosDoTipo = exercicios[estadoJornada.problemaEscolhido][estadoJornada.pilarAtual];
            var indiceExercicio = estadoJornada.exercicioAtual - 1;

            if (indiceExercicio >= exerciciosDoTipo.length) {
                console.log('üèÅ Pilar completado!');
                finalizarPilar();
                return;
            }

            var exercicio = exerciciosDoTipo[indiceExercicio];

            // Atualizar header melhorado
            atualizarHeaderExercicio();

            // Atualizar pergunta
            document.getElementById('exercicio-pergunta').textContent = exercicio.pergunta;

            // Criar op√ß√µes com novo layout
            var html = '';
            for (var i = 0; i < exercicio.opcoes.length; i++) {
                html += '<div class="opcao" onclick="selecionarOpcao(' + i + ')">';
                html += '<input type="radio" name="resposta" value="' + i + '">';
                html += '<label>' + exercicio.opcoes[i] + '</label>';
                html += '</div>';
            }

            document.getElementById('opcoes-container').innerHTML = html;

            // Limpar feedback e ocultar bot√£o pr√≥ximo
            var feedbackArea = document.getElementById('feedback-area');
            feedbackArea.style.display = 'none';
            feedbackArea.innerHTML = '';

            var btnProximo = document.getElementById('btn-proximo');
            btnProximo.style.display = 'none';

            // Habilitar bot√µes de a√ß√£o
            var btnResponder = document.querySelector('.btn-responder');
            var btnPular = document.querySelector('.btn-pular');
            if (btnResponder) btnResponder.disabled = false;
            if (btnPular) btnPular.disabled = false;

            console.log('‚úÖ Exerc√≠cio carregado: ' + exercicio.titulo);
            atualizarDisplaysExercicio();
        }

        // FUN√á√ÉO: Atualizar Header do Exerc√≠cio
        function atualizarHeaderExercicio() {
            // √çcones e nomes dos problemas
            var problemasInfo = {
                'logistica': {icone: 'üöö', nome: 'Log√≠stica E-commerce'},
                'performance': {icone: 'üìä', nome: 'Gest√£o de Performance'},
                'estoque': {icone: 'üì¶', nome: 'Gest√£o de Estoque'},
                'rh': {icone: 'üë•', nome: 'Recrutamento RH'},
                'marketing': {icone: 'üì±', nome: 'Marketing Digital'}
            };

            // √çcones e nomes dos pilares
            var pilaresInfo = {
                'decomposicao': {icone: 'üß©', nome: 'Decomposi√ß√£o'},
                'padroes': {icone: 'üîç', nome: 'Padr√µes'},
                'abstracao': {icone: 'üéØ', nome: 'Abstra√ß√£o'},
                'algoritmos': {icone: '‚öôÔ∏è', nome: 'Algoritmos'}
            };

            // Atualizar problema atual
            var problemaInfo = problemasInfo[estadoJornada.problemaEscolhido];
            if (problemaInfo) {
                document.getElementById('problema-icone').textContent = problemaInfo.icone;
                document.getElementById('problema-nome').textContent = problemaInfo.nome;
            }

            // Atualizar pilar atual
            var pilarInfo = pilaresInfo[estadoJornada.pilarAtual];
            if (pilarInfo) {
                document.getElementById('pilar-icone').textContent = pilarInfo.icone;
                document.getElementById('pilar-nome').textContent = pilarInfo.nome;
                document.getElementById('exercicio-contador').textContent = 'Exerc√≠cio ' + estadoJornada.exercicioAtual + '/3';
            }

            // Atualizar estat√≠sticas
            var exercicioAtual = estadoJornada.exerciciosCompletos + 1;
            document.getElementById('exercicios-stats').textContent = exercicioAtual + '/12';
            document.getElementById('pontos-stats').textContent = estadoJornada.pontuacaoTotal + '/120';

            // Atualizar barra de progresso
            var percentual = (estadoJornada.exerciciosCompletos / 12) * 100;
            document.getElementById('barra-progresso-fill').style.width = percentual + '%';
        }

        // FUN√á√ÉO 6: Selecionar Op√ß√£o
        function selecionarOpcao(opcao) {
            console.log('üîò Op√ß√£o selecionada: ' + opcao);

            // Marcar radio
            var radios = document.querySelectorAll('input[name="resposta"]');
            for (var i = 0; i < radios.length; i++) {
                radios[i].checked = (i === opcao);
            }
        }

        // FUN√á√ÉO 7: Validar Resposta - SISTEMA DE 2 TENTATIVAS
        function validarResposta() {
            console.log('');
            console.log('üîç VALIDANDO RESPOSTA...');

            // Pegar resposta selecionada
            var radioSelecionado = document.querySelector('input[name="resposta"]:checked');

            if (!radioSelecionado) {
                mostrarModal({
                    titulo: '‚ö†Ô∏è Aten√ß√£o',
                    mensagem: 'Por favor, selecione uma op√ß√£o antes de responder!',
                    tipo: 'aviso'
                });
                return;
            }

            var respostaDada = parseInt(radioSelecionado.value);
            exercicioAtualEstado.tentativas++;
            exercicioAtualEstado.respostaAluno = respostaDada;

            console.log('  Resposta dada: ' + respostaDada);
            console.log('  Tentativa: ' + exercicioAtualEstado.tentativas + '/' + CONFIGURACAO.MAX_TENTATIVAS);

            // Pegar exerc√≠cio atual
            var exerciciosDoTipo = exercicios[estadoJornada.problemaEscolhido][estadoJornada.pilarAtual];
            var indiceExercicio = estadoJornada.exercicioAtual - 1;
            var exercicio = exerciciosDoTipo[indiceExercicio];
            var respostaCorreta = exercicio.correta;

            console.log('  Resposta correta: ' + respostaCorreta);

            var correto = (respostaDada === respostaCorreta);
            console.log('  Resultado: ' + (correto ? '‚úÖ CORRETO' : '‚ùå INCORRETO'));

            var pontosGanhos = 0;
            var feedback = '';
            var continuarExercicio = false;

            if (correto) {
                // ACERTOU
                exercicioAtualEstado.acertou = true;

                if (exercicioAtualEstado.tentativas === 1) {
                    // Acertou na primeira tentativa
                    pontosGanhos = CONFIGURACAO.PONTOS_ACERTO_1A;
                    metricas.resumo.acertouPrimeira++;
                    metricas.pilares[estadoJornada.pilarAtual].acertos1a++;
                    feedback = 'üéâ Excelente! Acertou na primeira tentativa! (+10 pontos)';
                } else {
                    // Acertou na segunda tentativa
                    pontosGanhos = CONFIGURACAO.PONTOS_ACERTO_2A;
                    metricas.resumo.acertouSegunda++;
                    metricas.pilares[estadoJornada.pilarAtual].acertos2a++;
                    feedback = '‚úÖ Muito bem! Acertou na segunda tentativa! (+5 pontos)';
                }

                estadoJornada.pontuacaoTotal += pontosGanhos;
                estadoJornada.pontuacaoPorPilar[estadoJornada.pilarAtual] += pontosGanhos;

            } else {
                // ERROU
                if (exercicioAtualEstado.tentativas === 1) {
                    // Primeira tentativa errada - dar mais uma chance
                    pontosGanhos = CONFIGURACAO.PONTOS_ERRO_1A;
                    estadoJornada.pontuacaoTotal += pontosGanhos;
                    estadoJornada.pontuacaoPorPilar[estadoJornada.pilarAtual] += pontosGanhos;

                    feedback = '‚ö†Ô∏è Incorreto! Voc√™ tem mais uma chance. (-2 pontos)';
                    if (exercicio.dica) {
                        feedback += '<br><br><strong>Dica:</strong> ' + exercicio.dica;
                    }
                    continuarExercicio = true;

                } else {
                    // Segunda tentativa errada - exerc√≠cio acabou
                    pontosGanhos = CONFIGURACAO.PONTOS_ERRO_2A;
                    estadoJornada.pontuacaoTotal += pontosGanhos;
                    estadoJornada.pontuacaoPorPilar[estadoJornada.pilarAtual] += pontosGanhos;

                    metricas.resumo.errou++;
                    metricas.pilares[estadoJornada.pilarAtual].erros++;

                    feedback = '‚ùå Incorreto novamente. (-3 pontos)<br><br><strong>Resposta correta:</strong> ' + exercicio.opcoes[respostaCorreta] + '<br><br>' + exercicio.feedback;
                }
            }

            // Garantir que pontua√ß√£o n√£o fique negativa
            if (estadoJornada.pontuacaoTotal < 0) {
                estadoJornada.pontuacaoTotal = 0;
            }
            if (estadoJornada.pontuacaoPorPilar[estadoJornada.pilarAtual] < 0) {
                estadoJornada.pontuacaoPorPilar[estadoJornada.pilarAtual] = 0;
            }

            // Atualizar m√©tricas
            metricas.pilares[estadoJornada.pilarAtual].pontos = estadoJornada.pontuacaoPorPilar[estadoJornada.pilarAtual];

            // Se exerc√≠cio terminou (acertou ou errou 2x)
            if (!continuarExercicio) {
                estadoJornada.exerciciosCompletos++;

                // Salvar m√©tricas do exerc√≠cio
                salvarMetricaExercicio(exercicio, respostaCorreta, respostaDada);
            }

            // Atualizar displays
            atualizarHeaderExercicio();
            atualizarDisplaysPilares();

            // Mostrar feedback
            var feedbackArea = document.getElementById('feedback-area');
            feedbackArea.className = 'feedback-area show ' + (correto ? 'correto' : (continuarExercicio ? 'aviso' : 'incorreto'));
            feedbackArea.style.display = 'block';
            feedbackArea.innerHTML =
                '<div style="margin-bottom: 1rem;">' + feedback + '</div>' +
                '<div style="font-size: 0.9rem; color: #6B7280;">Tentativa ' + exercicioAtualEstado.tentativas + '/' + CONFIGURACAO.MAX_TENTATIVAS + ' ‚Ä¢ Pontua√ß√£o total: ' + estadoJornada.pontuacaoTotal + '/120</div>';

            if (continuarExercicio) {
                // Manter bot√µes habilitados para segunda tentativa
                console.log('üîÑ Aguardando segunda tentativa...');
            } else {
                // Desabilitar bot√µes e mostrar "Pr√≥ximo"
                var btnResponder = document.querySelector('.btn-responder');
                var btnPular = document.querySelector('.btn-pular');
                if (btnResponder) btnResponder.disabled = true;
                if (btnPular) btnPular.disabled = true;

                var btnProximo = document.getElementById('btn-proximo');
                btnProximo.style.display = 'block';
                btnProximo.classList.add('visivel');
            }

            console.log('‚úÖ Valida√ß√£o completa - Pontos: ' + pontosGanhos + ' - Total: ' + estadoJornada.pontuacaoTotal);
        }

        // FUN√á√ÉO: Salvar M√©trica do Exerc√≠cio
        function salvarMetricaExercicio(exercicio, respostaCorreta, respostaAluno) {
            var tempoGasto = Math.round((new Date() - exercicioAtualEstado.tempoInicio) / 1000);

            var status = 'erro';
            if (exercicioAtualEstado.pulou) {
                status = 'pulou';
            } else if (exercicioAtualEstado.acertou) {
                status = exercicioAtualEstado.tentativas === 1 ? 'acertou_primeira' : 'acertou_segunda';
            }

            var metricaExercicio = {
                numero: estadoJornada.exerciciosCompletos,
                pilar: estadoJornada.pilarAtual,
                pergunta: exercicio.pergunta.substring(0, 50) + '...',
                tipo: 'radio', // Assumindo m√∫ltipla escolha
                tentativas: exercicioAtualEstado.tentativas,
                status: status,
                respostaCorreta: exercicio.opcoes[respostaCorreta],
                respostaAluno: exercicioAtualEstado.respostaAluno !== null ? exercicio.opcoes[exercicioAtualEstado.respostaAluno] : 'N/A',
                pontos: calcularPontosExercicio(),
                tempoGasto: tempoGasto
            };

            metricas.exercicios.push(metricaExercicio);
            console.log('üíæ M√©trica salva:', metricaExercicio);
        }

        function calcularPontosExercicio() {
            if (exercicioAtualEstado.pulou) return 0;
            if (exercicioAtualEstado.acertou) {
                return exercicioAtualEstado.tentativas === 1 ? 10 : 5;
            }
            return exercicioAtualEstado.tentativas === 1 ? -2 : -5; // -2 primeira + -3 segunda = -5 total
        }

        // FUN√á√ÉO 8: Pr√≥ximo Exerc√≠cio OTIMIZADA
        function proximoExercicio() {
            console.log('');
            console.log('‚û°Ô∏è PR√ìXIMO EXERC√çCIO');

            if (estadoJornada.exercicioAtual < CONFIGURACAO.EXERCICIOS_POR_PILAR) {
                // Pr√≥ximo exerc√≠cio do mesmo pilar
                estadoJornada.exercicioAtual++;
                console.log('üìñ Carregando exerc√≠cio ' + estadoJornada.exercicioAtual + '/3 do pilar...');
                carregarExercicio();
            } else {
                // Pilar completado
                finalizarPilar();
            }
        }

        function finalizarPilar() {
            console.log('üèÅ PILAR COMPLETADO!');

            // Marcar pilar como completo
            if (estadoJornada.pilaresCompletos.indexOf(estadoJornada.pilarAtual) === -1) {
                estadoJornada.pilaresCompletos.push(estadoJornada.pilarAtual);
                console.log('üèÜ Pilar ' + estadoJornada.pilarAtual + ' completado!');
            }

            var PILARES = {
                'decomposicao': {nome: 'Decomposi√ß√£o', icone: 'üß©'},
                'padroes': {nome: 'Reconhecimento de Padr√µes', icone: 'üîç'},
                'abstracao': {nome: 'Abstra√ß√£o', icone: 'üéØ'},
                'algoritmos': {nome: 'Algoritmos', icone: '‚öôÔ∏è'}
            };

            // Mostrar modal de pilar completo
            mostrarModal({
                titulo: 'üéâ Pilar Completo!',
                mensagem: PILARES[estadoJornada.pilarAtual].icone + ' ' + PILARES[estadoJornada.pilarAtual].nome + ' conclu√≠do com sucesso!',
                tipo: 'sucesso'
            });

            // Verificar se todos os pilares foram completados
            if (estadoJornada.pilaresCompletos.length >= 4) {
                console.log('üéØ TODOS OS PILARES COMPLETADOS! Jornada finalizada!');
                setTimeout(function() {
                    fecharModal();
                    mostrarResultadoFinal();
                }, 2000);
            } else {
                // FLUXO AUTOM√ÅTICO - ir para pr√≥ximo pilar
                var pilares = ['decomposicao', 'padroes', 'abstracao', 'algoritmos'];
                var indiceAtual = pilares.indexOf(estadoJornada.pilarAtual);

                if (indiceAtual < 3) {
                    var proximoPilar = pilares[indiceAtual + 1];
                    console.log('üìö Pilar completo! Indo automaticamente para:', proximoPilar);

                    // Depois de 1.5 segundos, carregar pr√≥ximo pilar
                    setTimeout(function() {
                        fecharModal();
                        estadoJornada.pilarAtual = proximoPilar;
                        estadoJornada.exercicioAtual = 1;
                        carregarExercicio();
                    }, 1500);
                }
            }
        }

        function mostrarMensagemTransicao(pilarCompleto, proximoPilar) {
            var PILARES = {
                'decomposicao': {nome: 'Decomposi√ß√£o'},
                'padroes': {nome: 'Reconhecimento de Padr√µes'},
                'abstracao': {nome: 'Abstra√ß√£o'},
                'algoritmos': {nome: 'Algoritmos'}
            };

            var mensagem = document.createElement('div');
            mensagem.className = 'mensagem-transicao';
            mensagem.innerHTML =
                '<h2>üéâ Pilar Completo!</h2>' +
                '<p>' + PILARES[pilarCompleto].nome + ' conclu√≠do</p>' +
                '<p class="proximo">Iniciando: ' + PILARES[proximoPilar].nome + '</p>';

            document.body.appendChild(mensagem);

            setTimeout(function() {
                if (mensagem.parentNode) {
                    mensagem.parentNode.removeChild(mensagem);
                }
            }, 2000);
        }

        // FUN√á√ïES DE DISPLAY OTIMIZADAS
        function atualizarDisplaysExercicio() {
            console.log('üîÑ Atualizando displays do exerc√≠cio...');

            // Atualizar pontua√ß√£o
            var pontuacaoDisplay = document.getElementById('pontuacao-display');
            if (pontuacaoDisplay) {
                pontuacaoDisplay.textContent = estadoJornada.pontuacaoTotal;
            }

            // Atualizar progresso
            var progressoDisplay = document.getElementById('progresso-display');
            if (progressoDisplay) {
                progressoDisplay.textContent = estadoJornada.exerciciosCompletos + '/12';
            }

            // Atualizar barra de progresso visual
            var progressoFill = document.getElementById('progresso-fill');
            if (progressoFill) {
                var percentual = (estadoJornada.exerciciosCompletos / 12) * 100;
                progressoFill.style.width = percentual + '%';
                console.log('  üìà Barra progresso: ' + percentual.toFixed(1) + '%');
            }

            // Atualizar problema atual
            var problemaDisplay = document.getElementById('problema-display');
            if (problemaDisplay) {
                var nomeProblema = estadoJornada.problemaEscolhido ? obterNomeProblema(estadoJornada.problemaEscolhido) : '-';
                problemaDisplay.textContent = nomeProblema;
            }

            console.log('‚úÖ Displays do exerc√≠cio atualizados');
        }

        function atualizarDisplaysPilares() {
            console.log('üîÑ Atualizando displays dos pilares...');

            // Atualizar progresso geral
            var exercicioAtualPilares = document.getElementById('exercicio-atual-pilares');
            if (exercicioAtualPilares) {
                exercicioAtualPilares.textContent = estadoJornada.exerciciosCompletos;
            }

            var pontuacaoAtualPilares = document.getElementById('pontuacao-atual-pilares');
            if (pontuacaoAtualPilares) {
                pontuacaoAtualPilares.textContent = estadoJornada.pontuacaoTotal;
            }

            // Atualizar status de cada pilar
            var pilares = ['decomposicao', 'padroes', 'abstracao', 'algoritmos'];
            var emojis = {'decomposicao': 'üß©', 'padroes': 'üîç', 'abstracao': 'üéØ', 'algoritmos': '‚öôÔ∏è'};
            var nomes = {'decomposicao': 'Decomposi√ß√£o', 'padroes': 'Padr√µes', 'abstracao': 'Abstra√ß√£o', 'algoritmos': 'Algoritmos'};

            for (var i = 0; i < pilares.length; i++) {
                var pilar = pilares[i];
                var elemento = document.getElementById('pilar-' + pilar);
                if (elemento) {
                    var pontuacao = estadoJornada.pontuacaoPorPilar[pilar];
                    var exerciciosFeitos = 0;

                    // Calcular exerc√≠cios feitos no pilar (estimativa baseada na pontua√ß√£o)
                    if (pontuacao > 0) {
                        exerciciosFeitos = Math.min(3, Math.ceil(pontuacao / 7)); // Estimativa
                    }

                    if (estadoJornada.pilaresCompletos.indexOf(pilar) !== -1) {
                        exerciciosFeitos = 3;
                        elemento.style.background = '#d1fae5';
                        elemento.style.border = '2px solid #10B981';
                        elemento.style.color = '#065f46';
                    } else {
                        elemento.style.background = '#e5e7eb';
                        elemento.style.border = '1px solid #9ca3af';
                        elemento.style.color = '#374151';
                    }

                    elemento.textContent = emojis[pilar] + ' ' + nomes[pilar] + ': ' + exerciciosFeitos + '/3 (' + pontuacao + 'pts)';
                }
            }

            console.log('‚úÖ Displays dos pilares atualizados');
        }

        // Manter fun√ß√£o original para compatibilidade
        function atualizarDisplays() {
            atualizarDisplaysExercicio();
        }

        // Tornar fun√ß√µes globais explicitamente
        window.mostrarTela = mostrarTela;
        window.irParaProblemas = irParaProblemas;
        window.selecionarProblema = selecionarProblema;
        window.iniciarExercicios = iniciarExercicios;
        window.carregarExercicio = carregarExercicio;
        window.selecionarOpcao = selecionarOpcao;
        window.verificarResposta = verificarResposta;
        window.proximoExercicio = proximoExercicio;
        window.atualizarDisplays = atualizarDisplays;
        window.atualizarDisplaysExercicio = atualizarDisplaysExercicio;
        window.atualizarDisplaysPilares = atualizarDisplaysPilares;
        window.selecionarProblema = selecionarProblema;
        window.confirmarSelecaoProblema = confirmarSelecaoProblema;
        window.obterNomeProblema = obterNomeProblema;
        window.finalizarPilar = finalizarPilar;
        window.validarResposta = validarResposta;
        window.atualizarHeaderExercicio = atualizarHeaderExercicio;
        window.mostrarMensagemTransicao = mostrarMensagemTransicao;

        // FUN√á√ÉO: Pular exerc√≠cio - COM M√âTRICAS
        function pularExercicio() {
            console.log('');
            console.log('‚è≠Ô∏è PULANDO EXERC√çCIO...');

            exercicioAtualEstado.pulou = true;
            exercicioAtualEstado.tentativas = 0;

            // Atualizar m√©tricas
            metricas.resumo.pulou++;
            metricas.pilares[estadoJornada.pilarAtual].pulos++;

            // 0 pontos por pular
            console.log('  ü§∑ 0 pontos por pular');

            // Marcar exerc√≠cio como completo
            estadoJornada.exerciciosCompletos++;

            // Salvar m√©trica do exerc√≠cio
            var exerciciosDoTipo = exercicios[estadoJornada.problemaEscolhido][estadoJornada.pilarAtual];
            var indiceExercicio = estadoJornada.exercicioAtual - 1;
            var exercicio = exerciciosDoTipo[indiceExercicio];

            salvarMetricaExercicio(exercicio, exercicio.correta, null);

            console.log('  üìà Exerc√≠cios completados: ' + estadoJornada.exerciciosCompletos + '/12');

            // Mostrar feedback de pulo
            var feedbackArea = document.getElementById('feedback-area');
            feedbackArea.className = 'feedback-area show info';
            feedbackArea.style.display = 'block';
            feedbackArea.innerHTML =
                '<div><strong>‚è≠Ô∏è Exerc√≠cio Pulado</strong></div>' +
                '<div style="font-size: 0.9rem; color: #6B7280; margin-top: 0.5rem;">Nenhum ponto ganho ou perdido ‚Ä¢ Pontua√ß√£o: ' + estadoJornada.pontuacaoTotal + '/120</div>';

            // Desabilitar bot√µes e mostrar pr√≥ximo
            var btnResponder = document.querySelector('.btn-responder');
            var btnPular = document.querySelector('.btn-pular');
            if (btnResponder) btnResponder.disabled = true;
            if (btnPular) btnPular.disabled = true;

            var btnProximo = document.getElementById('btn-proximo');
            btnProximo.style.display = 'block';
            btnProximo.classList.add('visivel');

            // Atualizar displays
            atualizarHeaderExercicio();
            atualizarDisplaysPilares();
        }

        // FUN√á√ÉO: Voltar para Pilares - REMOVIDA (fluxo autom√°tico)
        // Bot√£o removido conforme solicita√ß√£o do usu√°rio

        // FUN√á√ÉO: Mostrar Resultado Final - RELAT√ìRIO COMPLETO
        // FUN√á√ÉO: Mostrar Resultado Final - RELAT√ìRIO COMPLETO
                function mostrarResultadoFinal() {
                    console.log("üèÜ MOSTRANDO RELAT√ìRIO DETALHADO...");

                    // 1. Finalizar c√°lculos das m√©tricas
                    finalizarMetricas();

                    // 2. Preencher cabe√ßalho e resumo visual
                    document.getElementById('nome-aluno-resultado').textContent = dadosAluno.nome || 'Aluno';
                    document.getElementById('resumo-pontuacao').textContent = estadoJornada.pontuacaoTotal + ' / 120';

                    var acuracia = (metricas.resumo.acertouPrimeira / 12) * 100;
                    document.getElementById('resumo-acuracia').textContent = acuracia.toFixed(0) + '%';

                    // A fun√ß√£o formatarTempo() j√° existe no seu script
                    document.getElementById('resumo-tempo').textContent = formatarTempo(metricas.resumo.tempoTotal);

                    // 3. Preencher an√°lise de status (os dados que voc√™ pediu)
                    document.getElementById('status-acertou-primeira').textContent = metricas.resumo.acertouPrimeira;
                    document.getElementById('status-acertou-segunda').textContent = metricas.resumo.acertouSegunda;
                    document.getElementById('status-errou').textContent = metricas.resumo.errou;
                    document.getElementById('status-pulou').textContent = metricas.resumo.pulou;

                    // 4. Geramos a an√°lise E capturamos os pontos fracos
                    var pontosFracos = gerarAnaliseQualitativa();

                    // 5. Pegamos o nome do problema
                    var nomeProblema = obterNomeProblema(estadoJornada.problemaEscolhido);

                    // 6. Chamamos a nova fun√ß√£o da API do Gemini com esses dados
                    buscarPlanoDeEstudoGemini(pontosFracos, nomeProblema);


                    // 4. Chamar fun√ß√µes que preenchem o resto do relat√≥rio
                    // Essas fun√ß√µes j√° existem no seu script e preenchem os IDs corretos!
                    preencherDesempenhoPilares();
                    preencherTabelaExercicios();
                    gerarAnaliseQualitativa();



                    // 5. Mostrar a tela do relat√≥rio
                    mostrarTela('tela-resultado');
                    console.log("‚úÖ Relat√≥rio detalhado gerado e exibido!");
                    console.log("üíæ M√©tricas finalizadas:", metricas);
                }


        // FUN√á√ÉO: Finalizar M√©tricas
        function finalizarMetricas() {
            dadosAluno.dataFim = new Date().toISOString();
            metricas.resumo.pontuacaoFinal = estadoJornada.pontuacaoTotal;
            metricas.resumo.tempoTotal = Math.round((new Date() - metricas.tempoTotalInicio) / 1000);

            console.log('üíæ M√©tricas finalizadas:', metricas);
        }

        // FUN√á√ÉO: Preencher Desempenho por Pilar
        function preencherDesempenhoPilares() {
            var pilares = [
                {id: 'decomposicao', nome: 'Decomposi√ß√£o', icone: 'üß©', cor: '#3B82F6'},
                {id: 'padroes', nome: 'Padr√µes', icone: 'üîç', cor: '#10B981'},
                {id: 'abstracao', nome: 'Abstra√ß√£o', icone: 'üéØ', cor: '#F59E0B'},
                {id: 'algoritmos', nome: 'Algoritmos', icone: '‚öôÔ∏è', cor: '#8B5CF6'}
            ];

            var html = '';
            for (var i = 0; i < pilares.length; i++) {
                var pilar = pilares[i];
                var pontos = estadoJornada.pontuacaoPorPilar[pilar.id];
                var percentual = Math.round((pontos / 30) * 100);
                var acertos1a = metricas.pilares[pilar.id].acertos1a;
                var acertos2a = metricas.pilares[pilar.id].acertos2a;

                html +=
                    '<div class="pilar-barra">' +
                        '<div class="pilar-info">' +
                            '<span>' + pilar.icone + ' ' + pilar.nome + '</span>' +
                            '<span class="pilar-pontos">' + pontos + '/30</span>' +
                        '</div>' +
                        '<div class="barra-progresso">' +
                            '<div class="barra-fill" style="width: ' + percentual + '%; background: ' + pilar.cor + ';"></div>' +
                        '</div>' +
                        '<div class="pilar-detalhes">' +
                            '<span>‚úì ' + acertos1a + ' na 1¬™</span>' +
                            '<span>‚úì ' + acertos2a + ' na 2¬™</span>' +
                            '<span class="percentual">' + percentual + '%</span>' +
                        '</div>' +
                    '</div>';
            }

            document.getElementById('pilares-resultado').innerHTML = html;
        }

        // FUN√á√ÉO: Preencher Tabela de Exerc√≠cios
        function preencherTabelaExercicios() {
            var html = '';

            for (var i = 0; i < metricas.exercicios.length; i++) {
                var ex = metricas.exercicios[i];
                var statusIcon = {
                    'acertou_primeira': 'üéØ Acertou 1¬™',
                    'acertou_segunda': '‚úÖ Acertou 2¬™',
                    'erro': '‚ùå Errou',
                    'pulou': '‚è≠Ô∏è Pulou'
                };

                var statusClass = ex.status.replace('_', '-');
                if (ex.status === 'erro') statusClass = 'erro';

                html +=
                    '<tr class="' + statusClass + '">' +
                        '<td>' + ex.numero + '</td>' +
                        '<td>' + capitalizarPrimeira(ex.pilar) + '</td>' +
                        '<td>' + statusIcon[ex.status] + '</td>' +
                        '<td>' + ex.tentativas + '/2</td>' +
                        '<td>' + (ex.pontos >= 0 ? '+' : '') + ex.pontos + '</td>' +
                        '<td>' + ex.tempoGasto + 's</td>' +
                    '</tr>';
            }

            document.getElementById('tabela-exercicios-corpo').innerHTML = html;
        }

        // FUN√á√ÉO: Gerar An√°lise Qualitativa
        function gerarAnaliseQualitativa() {
            var pontosFortes = [];
            var pontosDesenvolver = [];

            // Analisar desempenho por pilar
            var pilares = ['decomposicao', 'padroes', 'abstracao', 'algoritmos'];
            var nomesPilares = {
                'decomposicao': 'Decomposi√ß√£o',
                'padroes': 'Reconhecimento de Padr√µes',
                'abstracao': 'Abstra√ß√£o',
                'algoritmos': 'Algoritmos'
            };

            for (var i = 0; i < pilares.length; i++) {
                var pilar = pilares[i];
                var pontos = estadoJornada.pontuacaoPorPilar[pilar];
                var percentual = Math.round((pontos / 30) * 100);

                if (percentual >= 80) {
                    pontosFortes.push('Excelente dom√≠nio de ' + nomesPilares[pilar] + ' (' + percentual + '%)');
                } else if (percentual >= 60) {
                    pontosFortes.push('Boa compreens√£o de ' + nomesPilares[pilar] + ' (' + percentual + '%)');
                } else {
                    pontosDesenvolver.push(nomesPilares[pilar] + ' precisa ser desenvolvido (' + percentual + '%)');
                }
            }

            // Analisar padr√µes gerais
            var taxaPrimeiraTentativa = Math.round((metricas.resumo.acertouPrimeira / 12) * 100);
            if (taxaPrimeiraTentativa >= 70) {
                pontosFortes.push('Alta precis√£o: ' + taxaPrimeiraTentativa + '% de acertos na primeira tentativa');
            } else if (taxaPrimeiraTentativa < 40) {
                pontosDesenvolver.push('Melhorar aten√ß√£o: apenas ' + taxaPrimeiraTentativa + '% na primeira tentativa');
            }

            if (metricas.resumo.pulou === 0) {
                pontosFortes.push('Persist√™ncia: completou todos os exerc√≠cios sem pular');
            } else if (metricas.resumo.pulou >= 3) {
                pontosDesenvolver.push('Evitar pular exerc√≠cios: ' + metricas.resumo.pulou + ' pulados');
            }

            // Preencher listas
            var htmlFortes = '';
            for (var j = 0; j < pontosFortes.length; j++) {
                htmlFortes += '<li>' + pontosFortes[j] + '</li>';
            }
            document.getElementById('pontos-fortes-lista').innerHTML = htmlFortes || '<li>Continue praticando para identificar seus pontos fortes!</li>';

            var htmlDesenvolver = '';

            // ===================================================
            // MODIFICA√á√ÉO AQUI: Capturar nomes puros para a API
            // ===================================================
            var nomesPontosFracosParaGemini = [];
            // ===================================================

            for (var k = 0; k < pontosDesenvolver.length; k++) {
                htmlDesenvolver += '<li>' + pontosDesenvolver[k] + '</li>';

                // MODIFICA√á√ÉO AQUI: Salva o nome puro do pilar
                // Extrai "Decomposi√ß√£o" da string "Decomposi√ß√£o precisa ser..."
                nomesPontosFracosParaGemini.push(pontosDesenvolver[k].split(' precisa')[0]);

            }
            document.getElementById('pontos-desenvolver-lista').innerHTML = htmlDesenvolver || '<li>Parab√©ns! Demonstrou dom√≠nio em todas as √°reas.</li>';

            return nomesPontosFracosParaGemini;
        }

        function capitalizarPrimeira(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        // FUN√á√ÉO: Calcular Performance
        function calcularPerformance(pontuacao) {
            if (pontuacao >= 108) return {nome: 'Excelente', icone: 'ü•á'};
            if (pontuacao >= 84) return {nome: 'Muito Bom', icone: 'ü•à'};
            if (pontuacao >= 60) return {nome: 'Bom', icone: 'ü•â'};
            if (pontuacao >= 36) return {nome: 'Regular', icone: 'üìù'};
            return {nome: 'Iniciante', icone: 'üìã'};
        }

        // FUN√á√ÉO: Obter Nome do M√™s
        function obterNomeMes(mes) {
            var meses = ['Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho',
                        'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            return meses[mes];
        }

        // FUN√á√ïES DO CERTIFICADO PERSONALIZADO
        function gerarCertificado() {
            console.log('üì• Gerando certificado personalizado...');

            var aluno = dadosAluno;
            var data = new Date().toLocaleDateString('pt-BR', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });

            var performance = calcularPerformance(estadoJornada.pontuacaoTotal);

            // Criar HTML do certificado
            var certificadoHTML = `
                <div class="certificado-pdf">
                    <div class="certificado-borda">
                        <div class="certificado-header">
                            <h1>üèÜ CERTIFICADO</h1>
                            <h2>Jornada do Pensamento Computacional</h2>
                        </div>

                        <div class="certificado-body">
                            <p class="certificado-texto">Certificamos que</p>
                            <h2 class="certificado-nome">${aluno.nome || 'Estudante'}</h2>

                            ${aluno.instituicao ?
                                '<p class="certificado-instituicao">' + aluno.instituicao + '</p>'
                                : ''}

                            <p class="certificado-texto">
                                concluiu com sucesso a Jornada do Pensamento Computacional<br>
                                aplicado ao problema
                            </p>

                            <h3 class="certificado-problema">
                                ${obterNomeProblema(estadoJornada.problemaEscolhido)}
                            </h3>

                            <div class="certificado-stats">
                                <p><strong>Pontua√ß√£o:</strong> ${estadoJornada.pontuacaoTotal}/120 pontos</p>
                                <p><strong>Performance:</strong> ${performance.nome} (${Math.round((estadoJornada.pontuacaoTotal / 120) * 100)}%)</p>
                                <p><strong>Pilares Dominados:</strong> ${estadoJornada.pilaresCompletos.length}/4</p>
                            </div>

                            <p class="certificado-data">${data}</p>
                        </div>

                        <div class="certificado-footer">
                            <p>Pensamento Computacional Aplicado √† Gest√£o</p>
                        </div>
                    </div>
                </div>
            `;

            // Abrir em nova janela para impress√£o
            var janela = window.open('', '_blank');
            if (janela) {
                janela.document.write('<html><head><title>Certificado - ' + (aluno.nome || 'Estudante') + '</title>');
                janela.document.write('<style>' + obterCSSCertificado() + '</style>');
                janela.document.write('</head><body>');
                janela.document.write(certificadoHTML);
                janela.document.write('</body></html>');
                janela.document.close();

                // Dar tempo para carregar e abrir di√°logo de impress√£o
                setTimeout(function() {
                    janela.print();
                }, 500);
            }

            mostrarModal({
                titulo: 'üì• Certificado Gerado!',
                mensagem: 'Use Ctrl+P ou Cmd+P para salvar como PDF ou imprimir.\n\nSeu certificado est√° personalizado com seu nome e resultados!',
                tipo: 'sucesso'
            });
        }

        function obterCSSCertificado() {
            return `
                body { margin: 0; padding: 20px; font-family: Arial, sans-serif; background: #f5f5f5; }
                .certificado-pdf { max-width: 800px; margin: 0 auto; }
                .certificado-borda { border: 8px double #2563EB; padding: 3rem; background: white; }
                .certificado-header { text-align: center; margin-bottom: 2rem; }
                .certificado-header h1 { font-size: 3rem; color: #2563EB; margin: 0; }
                .certificado-header h2 { font-size: 1.5rem; color: #374151; margin: 0.5rem 0 0 0; }
                .certificado-body { text-align: center; }
                .certificado-texto { font-size: 1.2rem; color: #6B7280; margin: 1rem 0; }
                .certificado-nome { font-size: 2.5rem; color: #1F2937; margin: 1rem 0; border-bottom: 2px solid #2563EB; display: inline-block; padding-bottom: 0.5rem; }
                .certificado-instituicao { font-size: 1.1rem; color: #6B7280; font-style: italic; }
                .certificado-problema { font-size: 2rem; color: #2563EB; margin: 1.5rem 0; }
                .certificado-stats { margin: 2rem 0; padding: 1rem; background: #F3F4F6; border-radius: 8px; }
                .certificado-stats p { margin: 0.5rem 0; font-size: 1.1rem; }
                .certificado-data { font-size: 1rem; color: #6B7280; margin-top: 2rem; }
                .certificado-footer { text-align: center; margin-top: 2rem; padding-top: 1rem; border-top: 2px solid #E5E7EB; }
                .certificado-footer p { color: #6B7280; font-size: 0.9rem; }
                @media print { body { margin: 0; background: white; } }
            `;
        }

        function compartilharResultado() {
            console.log('üì± Compartilhando resultado...');
            var performance = calcularPerformance(estadoJornada.pontuacaoTotal);
            var percentual = Math.round((estadoJornada.pontuacaoTotal / 120) * 100);

            var texto = 'üèÜ ' + (dadosAluno.nome || 'Estudante') + ' concluiu a Jornada do Pensamento Computacional!\n\n' +
                       'Problema: ' + obterNomeProblema(estadoJornada.problemaEscolhido) + '\n' +
                       'Pontua√ß√£o: ' + estadoJornada.pontuacaoTotal + '/120 pontos (' + percentual + '%)\n' +
                       'Performance: ' + performance.nome + ' ' + performance.icone + '\n' +
                       'Pilares dominados: ' + estadoJornada.pilaresCompletos.length + '/4\n\n' +
                       '#PensamentoComputacional #Gest√£o #Aprendizado #Certificado';

            if (navigator.share) {
                navigator.share({
                    title: 'Jornada do Pensamento Computacional - Resultado de ' + (dadosAluno.nome || 'Estudante'),
                    text: texto
                });
            } else {
                // Fallback para copiar texto
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(texto).then(function() {
                        mostrarModal({
                            titulo: 'üì± Resultado Copiado!',
                            mensagem: 'Texto copiado para √°rea de transfer√™ncia!\n\nCole nas suas redes sociais para compartilhar sua conquista.',
                            tipo: 'sucesso'
                        });
                    }).catch(function() {
                        mostrarModal({
                            titulo: 'üì± Compartilhar Resultado',
                            mensagem: texto + '\n\nCopie este texto para compartilhar nas redes sociais!',
                            tipo: 'sucesso'
                        });
                    });
                } else {
                    mostrarModal({
                        titulo: 'üì± Compartilhar Resultado',
                        mensagem: texto + '\n\nCopie este texto para compartilhar nas redes sociais!',
                        tipo: 'sucesso'
                    });
                }
            }
        }

        function reiniciarJornada() {
            console.log('üîÑ Reiniciando jornada...');

            mostrarModal({
                titulo: 'üîÑ Reiniciar Jornada',
                mensagem: 'Isto ir√° apagar todo o seu progresso atual e permitir escolher outro problema.\n\nTem certeza que deseja reiniciar?',
                tipo: 'confirmacao',
                onConfirmar: function() {
                // Resetar estado
                estadoJornada = {
                    problemaEscolhido: null,
                    pilarAtual: null,
                    exercicioAtual: 1,
                    pontuacaoTotal: 0,
                    exerciciosCompletos: 0,
                    pontuacaoPorPilar: {
                        decomposicao: 0,
                        padroes: 0,
                        abstracao: 0,
                        algoritmos: 0
                    },
                    pilaresCompletos: []
                };

                // Reabilitar navega√ß√£o
                var navegacaoProblemas = document.getElementById('navegacao-problemas');
                if (navegacaoProblemas) {
                    navegacaoProblemas.style.display = 'block';
                }

                console.log('‚úÖ Estado resetado - voltando ao registro');
                mostrarTela('tela-registro');
                }
            });
        }

        // Tornar todas as fun√ß√µes do modal e registro globais
        window.mostrarModal = mostrarModal;
        window.fecharModal = fecharModal;
        window.confirmarModal = confirmarModal;
        window.registrarAluno = registrarAluno;
        window.gerarCertificado = gerarCertificado;
        window.obterCSSCertificado = obterCSSCertificado;

        window.pularExercicio = pularExercicio;
        window.iniciarPilares = iniciarPilares;
        window.mostrarContextoProblema = mostrarContextoProblema;
        window.salvarMetricaExercicio = salvarMetricaExercicio;
        window.calcularPontosExercicio = calcularPontosExercicio;
        window.mostrarResultadoFinal = mostrarResultadoFinal;
        window.calcularPerformance = calcularPerformance;
        window.obterNomeMes = obterNomeMes;
        window.compartilharResultado = compartilharResultado;
        window.reiniciarJornada = reiniciarJornada;
        window.finalizarMetricas = finalizarMetricas;
        window.preencherDesempenhoPilares = preencherDesempenhoPilares;
        window.preencherTabelaExercicios = preencherTabelaExercicios;
        window.gerarAnaliseQualitativa = gerarAnaliseQualitativa;
        window.capitalizarPrimeira = capitalizarPrimeira;

        // FUN√á√ïES DE DOWNLOAD DE RELAT√ìRIO
        function baixarRelatorioPDF() {
            var html = gerarHTMLRelatorio();

            var janela = window.open('', '_blank');
            if (janela) {
                janela.document.write(html);
                janela.document.close();

                setTimeout(function() {
                    janela.print();
                }, 500);
            }

            mostrarModal({
                titulo: 'üìÑ Relat√≥rio Gerado!',
                mensagem: 'Use Ctrl+P ou Cmd+P para salvar como PDF.\n\nO relat√≥rio cont√©m todas as m√©tricas de desempenho para avalia√ß√£o pedag√≥gica.',
                tipo: 'sucesso'
            });
        }

        function baixarDadosCSV() {
            var csv = gerarCSV();
            var blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });

            // Criar link para download
            var link = document.createElement('a');
            var url = URL.createObjectURL(blob);

            link.setAttribute('href', url);
            link.setAttribute('download', 'dados_' + (dadosAluno.nome || 'aluno').replace(/\s+/g, '_') + '_' + new Date().toISOString().split('T')[0] + '.csv');
            link.style.visibility = 'hidden';

            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            URL.revokeObjectURL(url);

            mostrarModal({
                titulo: 'üìä Dados Exportados!',
                mensagem: 'Arquivo CSV baixado com sucesso!\n\nCont√©m dados estruturados para an√°lise estat√≠stica.',
                tipo: 'sucesso'
            });
        }


        function gerarHTMLRelatorio() {
            var aluno = dadosAluno.nome || 'Aluno';
            var problema = obterNomeProblema(estadoJornada.problemaEscolhido);
            var data = new Date().toLocaleDateString('pt-BR');
            var percentual = Math.round((estadoJornada.pontuacaoTotal / 120) * 100);

            return `
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="UTF-8">
                <title>Relat√≥rio de Avalia√ß√£o - ${aluno}</title>
                <style>
                    ${cssRelatorio()}
                </style>
            </head>
            <body>
                <div class="relatorio">
                    <header class="cabecalho">
                        <h1>üìä RELAT√ìRIO DE AVALIA√á√ÉO</h1>
                        <h2>Jornada do Pensamento Computacional</h2>
                        <p>Data: ${data}</p>
                    </header>

                    <section class="identificacao">
                        <h3>Identifica√ß√£o</h3>
                        <table>
                            <tr><td><strong>Aluno:</strong></td><td>${aluno}</td></tr>
                            <tr><td><strong>Problema:</strong></td><td>${problema}</td></tr>
                            <tr><td><strong>Data In√≠cio:</strong></td><td>${new Date(dadosAluno.dataInicio).toLocaleString('pt-BR')}</td></tr>
                            <tr><td><strong>Data Fim:</strong></td><td>${new Date(dadosAluno.dataFim).toLocaleString('pt-BR')}</td></tr>
                            <tr><td><strong>Tempo Total:</strong></td><td>${formatarTempo(metricas.resumo.tempoTotal)}</td></tr>
                        </table>
                    </section>

                    <section class="resumo">
                        <h3>Resumo Geral</h3>
                        <table>
                            <tr><td>Pontua√ß√£o Final:</td><td>${estadoJornada.pontuacaoTotal}/120</td></tr>
                            <tr><td>Percentual:</td><td>${percentual}%</td></tr>
                            <tr><td>Acertou 1¬™ Tentativa:</td><td>${metricas.resumo.acertouPrimeira}</td></tr>
                            <tr><td>Acertou 2¬™ Tentativa:</td><td>${metricas.resumo.acertouSegunda}</td></tr>
                            <tr><td>Errou:</td><td>${metricas.resumo.errou}</td></tr>
                            <tr><td>Pulou:</td><td>${metricas.resumo.pulou}</td></tr>
                        </table>
                    </section>

                    <section class="pilares">
                        <h3>Desempenho por Pilar</h3>
                        ${gerarTabelaPilares()}
                    </section>

                    <section class="exercicios">
                        <h3>Detalhamento por Exerc√≠cio</h3>
                        ${gerarTabelaExerciciosRelatorio()}
                    </section>

                    <section class="analise">
                        <h3>An√°lise Qualitativa</h3>
                        ${gerarAnaliseRelatorio()}
                    </section>
                </div>
            </body>
            </html>
            `;
        }

        function gerarCSV() {
            var linhas = [];

            // Cabe√ßalho
            linhas.push('Aluno,Problema,Exercicio,Pilar,Status,Tentativas,Pontos,Tempo_Segundos');

            // Dados
            for (var i = 0; i < metricas.exercicios.length; i++) {
                var ex = metricas.exercicios[i];
                linhas.push([
                    dadosAluno.nome || 'Aluno',
                    estadoJornada.problemaEscolhido,
                    ex.numero,
                    ex.pilar,
                    ex.status,
                    ex.tentativas,
                    ex.pontos,
                    ex.tempoGasto
                ].join(','));
            }

            return linhas.join('\n');
        }

        function cssRelatorio() {
            return `
                body { margin: 0; padding: 20px; font-family: Arial, sans-serif; background: #f5f5f5; }
                .relatorio { max-width: 800px; margin: 0 auto; background: white; padding: 2rem; }
                .cabecalho { text-align: center; margin-bottom: 2rem; border-bottom: 2px solid #2563EB; padding-bottom: 1rem; }
                .cabecalho h1 { color: #2563EB; margin: 0; }
                .cabecalho h2 { color: #374151; margin: 0.5rem 0; }
                section { margin-bottom: 2rem; }
                h3 { color: #1F2937; border-bottom: 1px solid #E5E7EB; padding-bottom: 0.5rem; }
                table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
                td, th { padding: 0.5rem; border: 1px solid #E5E7EB; text-align: left; }
                th { background: #F9FAFB; font-weight: 600; }
                .status-primeira { background: #D1FAE5; }
                .status-segunda { background: #DBEAFE; }
                .status-erro { background: #FEE2E2; }
                .status-pulou { background: #FEF3C7; }
                @media print { body { margin: 0; background: white; } }
            `;
        }

        function formatarTempo(segundos) {
            var minutos = Math.floor(segundos / 60);
            var segs = segundos % 60;
            return minutos + 'min ' + segs + 's';
        }

        function gerarTabelaPilares() {
            var html = '<table><tr><th>Pilar</th><th>Pontos</th><th>Percentual</th><th>1¬™ Tent.</th><th>2¬™ Tent.</th></tr>';

            var pilares = [
                {id: 'decomposicao', nome: 'Decomposi√ß√£o'},
                {id: 'padroes', nome: 'Padr√µes'},
                {id: 'abstracao', nome: 'Abstra√ß√£o'},
                {id: 'algoritmos', nome: 'Algoritmos'}
            ];

            for (var i = 0; i < pilares.length; i++) {
                var p = pilares[i];
                var pontos = estadoJornada.pontuacaoPorPilar[p.id];
                var perc = Math.round((pontos / 30) * 100);
                var acertos1 = metricas.pilares[p.id].acertos1a;
                var acertos2 = metricas.pilares[p.id].acertos2a;

                html += `<tr><td>${p.nome}</td><td>${pontos}/30</td><td>${perc}%</td><td>${acertos1}</td><td>${acertos2}</td></tr>`;
            }

            html += '</table>';
            return html;
        }

        function gerarTabelaExerciciosRelatorio() {
            var html = '<table><tr><th>#</th><th>Pilar</th><th>Status</th><th>Tent.</th><th>Pontos</th><th>Tempo</th></tr>';

            for (var i = 0; i < metricas.exercicios.length; i++) {
                var ex = metricas.exercicios[i];
                var statusTexto = {
                    'acertou_primeira': 'Acertou 1¬™',
                    'acertou_segunda': 'Acertou 2¬™',
                    'erro': 'Errou',
                    'pulou': 'Pulou'
                };

                var classe = 'status-' + ex.status.replace('_', '-');
                if (ex.status === 'erro') classe = 'status-erro';

                html += `<tr class="${classe}"><td>${ex.numero}</td><td>${capitalizarPrimeira(ex.pilar)}</td><td>${statusTexto[ex.status]}</td><td>${ex.tentativas}/2</td><td>${ex.pontos >= 0 ? '+' : ''}${ex.pontos}</td><td>${ex.tempoGasto}s</td></tr>`;
            }

            html += '</table>';
            return html;
        }

        function gerarAnaliseRelatorio() {
            var html = '<div>';

            // Simular an√°lise qualitativa
            var percentualGeral = Math.round((estadoJornada.pontuacaoTotal / 120) * 100);

            if (percentualGeral >= 80) {
                html += '<p><strong>Performance Geral:</strong> Excelente dom√≠nio dos conceitos de Pensamento Computacional.</p>';
            } else if (percentualGeral >= 60) {
                html += '<p><strong>Performance Geral:</strong> Boa compreens√£o, com oportunidades de aprimoramento.</p>';
            } else {
                html += '<p><strong>Performance Geral:</strong> Conceitos b√°sicos adquiridos, recomenda-se revis√£o e pr√°tica adicional.</p>';
            }

            html += '<p><strong>Taxa de Acerto na 1¬™ Tentativa:</strong> ' + Math.round((metricas.resumo.acertouPrimeira / 12) * 100) + '%</p>';
            html += '<p><strong>Persist√™ncia:</strong> ' + (metricas.resumo.pulou === 0 ? 'Completou todos os exerc√≠cios' : 'Pulou ' + metricas.resumo.pulou + ' exerc√≠cios') + '</p>';

            html += '</div>';
            return html;
        }

        // Tornar fun√ß√µes globais
        window.baixarRelatorioPDF = baixarRelatorioPDF;
        window.baixarDadosCSV = baixarDadosCSV;
        window.gerarHTMLRelatorio = gerarHTMLRelatorio;
        window.gerarCSV = gerarCSV;
        window.cssRelatorio = cssRelatorio;
        window.formatarTempo = formatarTempo;
        window.gerarTabelaPilares = gerarTabelaPilares;
        window.gerarTabelaExerciciosRelatorio = gerarTabelaExerciciosRelatorio;
        window.gerarAnaliseRelatorio = gerarAnaliseRelatorio;

        // FUN√á√ÉO: Mostrar Conquista
        function mostrarConquista(titulo, descricao) {
            console.log('üèÜ CONQUISTA: ' + titulo);

            // Criar elemento de conquista
            var conquistaDiv = document.createElement('div');
            conquistaDiv.className = 'conquista';
            conquistaDiv.innerHTML =
                '<div style="font-size: 1.5rem; margin-bottom: 0.5rem;">' + titulo + '</div>' +
                '<div>' + descricao + '</div>';

            // Inserir antes do conte√∫do do exerc√≠cio
            var container = document.querySelector('.exercicio-container');
            if (container && container.children.length > 0) {
                container.insertBefore(conquistaDiv, container.children[1]);

                // Remover ap√≥s 5 segundos
                setTimeout(function() {
                    if (conquistaDiv.parentNode) {
                        conquistaDiv.parentNode.removeChild(conquistaDiv);
                    }
                }, 5000);
            }
        }

        window.mostrarConquista = mostrarConquista;

        // Fechar modal ao clicar fora
        document.addEventListener('click', function(e) {
            var overlay = document.getElementById('modal-overlay');
            if (overlay && e.target === overlay) {
                fecharModal();
            }
        });


          // ===================================================
          // NOVA FUN√á√ÉO PARA CHAMAR A API (PLANO DE ESTUDO)
          // ===================================================
          async function buscarPlanoDeEstudoGemini(pontosFracos, problema) {
            const container = document.getElementById('gemini-plano-estudo');
            const conteudo = document.getElementById('gemini-plano-conteudo');

            // Mostra o container com a mensagem de "carregando"
            container.style.display = 'block';
            conteudo.innerHTML = '<p>Personalizando seu plano de estudo... O Gemini est√° analisando seu desempenho.</p>';

            try {
              // Chama a NOVA API que criamos na Vercel
              const response = await fetch('/api/gerar-plano-estudo', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  pontosFracos: pontosFracos, // Array de strings, ex: ['Decomposi√ß√£o']
                  problema: problema       // String, ex: 'Log√≠stica E-commerce'
                })
              });

              if (!response.ok) {
                throw new Error(`Erro na API: ${response.status}`);
              }

              const data = await response.json();

              // Formata o texto do Gemini (Markdown simples para HTML)
              // Converte **negrito** para <strong> e quebras de linha para <br>
              let htmlFormatado = data.planoDeEstudo
                  .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                  .replace(/\n/g, '<br>');

              // Simples convers√£o de listas * item para <li>
              if (htmlFormatado.includes('* ')) {
                  htmlFormatado = htmlFormatado.replace(/\* (.*?)(<br>|$)/g, '<li>$1</li>');
                  htmlFormatado = '<ul>' + htmlFormatado.replace(/<li>/g, '<br><li>') + '</ul>';
                  htmlFormatado = htmlFormatado.replace(/<br><ul>/, '<ul>').replace(/<br><li>/g, '<li>');
              }

              conteudo.innerHTML = htmlFormatado;

            } catch (error) {
              console.error('Falha ao buscar plano de estudo:', error);
              conteudo.innerHTML = '<p>Desculpe, n√£o foi poss√≠vel gerar seu plano de estudo no momento.</p>';
            }
          }

        // Inicializa√ß√£o quando DOM carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('');
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            console.log('üöÄ JORNADA COM MODAL SYSTEM & REGISTRO CARREGADA!');
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');

            // Dados do aluno mantidos em vari√°veis JavaScript
            // (localStorage n√£o dispon√≠vel devido √†s restri√ß√µes do ambiente)
            console.log('üìù Usando vari√°veis em mem√≥ria para dados do aluno');

            console.log('‚úÖ Sistema de Modal Elegante: ATIVADO');
            console.log('‚úÖ Formul√°rio de Registro: ATIVADO');
            console.log('‚úÖ Certificado Personalizado: ATIVADO');
            console.log('‚úÖ Substitui√ß√£o de Popups: COMPLETA');
            console.log('‚úÖ 60 exerc√≠cios carregados (12 por problema)');
            console.log('‚úÖ Sistema de pontua√ß√£o 120pts ativado');

            // Inicializar displays
            if (typeof atualizarDisplaysExercicio === 'function') {
                atualizarDisplaysExercicio();
            }
            if (typeof atualizarDisplaysPilares === 'function') {
                atualizarDisplaysPilares();
            }
            console.log('üé® UI com modal system inicializada com sucesso!');

            console.log('');
            console.log('üéâ MELHORIAS IMPLEMENTADAS:');
            console.log('  ‚ùå Popups removidos (alert/confirm)');
            console.log('  ‚úÖ Modal elegante com anima√ß√µes');
            console.log('  ‚úÖ Formul√°rio de registro obrigat√≥rio');
            console.log('  ‚úÖ Certificado personalizado com nome');
            console.log('  ‚úÖ Download de certificado (print to PDF)');
            console.log('  ‚úÖ Valida√ß√£o de formul√°rio');
            console.log('  ‚úÖ Persist√™ncia de dados do aluno');
            console.log('');
            console.log('üéÜ JORNADA COMPLETA PRONTA PARA USO!');
        });




        // Log de teste imediato
        console.log('üß™ TESTE DE FUN√á√ïES UI MELHORADA:');
        console.log('  mostrarTela existe?', typeof mostrarTela);
        console.log('  validarResposta existe?', typeof validarResposta);
        console.log('  atualizarHeaderExercicio existe?', typeof atualizarHeaderExercicio);
        console.log('  mostrarMensagemTransicao existe?', typeof mostrarMensagemTransicao);
        console.log('  fluxoAutomatico: ATIVADO');
        console.log('  botaoVoltarPilares: REMOVIDO');
        console.log('  layoutBotoesLadoALado: IMPLEMENTADO');
        console.log('  headerProgresso: IMPLEMENTADO');
        console.log('  feedbackAnimado: IMPLEMENTADO');
        console.log('‚úÖ Todas as melhorias de UI implementadas!');
        console.log('');
        console.log('üéØ ESTAT√çSTICAS DO MODELO OTIMIZADO:');
        console.log('  Exerc√≠cios por usu√°rio: 12 (1 problema)');
        console.log('  Problemas dispon√≠veis: 5');
        console.log('  Pilares por problema: 4');
        console.log('  Exerc√≠cios por pilar: 3');
        console.log('  Pontua√ß√£o m√°xima: 120 pontos (12 exerc√≠cios)');
        console.log('  Sistema de pontos: +10 acerto, -3 erro, 0 pular');
        console.log('  M√°ximo por pilar: 30 pontos');
        console.log('  Certificado: Espec√≠fico do problema escolhido');
        console.log('  Navega√ß√£o: Bloqueada ap√≥s escolher problema');
        console.log('');
        console.log('üéÜ DISTRIBUI√á√ÉO DE RESPOSTAS CORRETAS - CORRIGIDA!');
        console.log('  ‚úÖ TODAS as respostas est√£o em posi√ß√µes aleat√≥rias!');
        console.log('  ‚úÖ N√ÉO h√° mais padr√£o previs√≠vel (sempre posi√ß√£o 0)!');
        console.log('  ‚úÖ Usu√°rios precisam ler TODAS as op√ß√µes!');
        console.log('  ‚úÖ Sistema justo e educativo implementado!');
        console.log('  ‚úÖ 60 exerc√≠cios com distribui√ß√£o variada!');
    </script>
</body>
</html>
